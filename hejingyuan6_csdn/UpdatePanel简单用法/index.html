<div style="color:blue" align=center>UpdatePanel简单用法</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">

<p style="margin:0in; font-family:宋体; font-size:16.0pt"><br>
</p>
<p style="margin:0in; font-family:宋体; font-size:16.0pt"><span style="font-family:KaiTi_GB2312; font-size:16pt">&nbsp; &nbsp;ScriptManager和UpdatePanel控件联合使用可以实现页面异步局部更新的效果。其中的UpdatePanel就是设置页面中异步局部更新区域，它必须依赖于ScriptManager存在，因为ScriptManger控件提供了客户端脚本生成与管理UpdatePanel的功 能。</span></p>
<p style="margin:0in; font-family:宋体; font-size:16.0pt"><span lang="zh-CN" style="font-family:KaiTi_GB2312">几个重要的属性：</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312"><br>
</span><span lang="zh-CN" style="font-family:KaiTi_GB2312"></span></p>
<p style="margin:0in; font-family:KaiTi_GB2312; font-size:21px"><span style="font-size:18px"><span style="font-family:KaiTi_GB2312; font-size:21px">&nbsp; &nbsp;ScriptManager控件的EnablePartialRendering属性：<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; True-实现页面的异步局部更新;False-实现全页面的刷新。<br>
&nbsp; &nbsp;UpdatePanel控件的RenderMode属性：<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; InLine-UpdatePanel控件被解析成HTML的&lt;span&gt;标记;Block-UpdatePanel控件被解析成HTML控件的&lt;DIV&gt;。<br>
&nbsp; &nbsp;UpdatePanel控件的UpdateMode属性：<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Always-UpdatePanel页面上任何一处发生的回发操作都会产生页局部更新;Conditional-只在特定的情况下才产页面的回发，如执行UpdatePanel控件的update()方法或在指定的触发器的操作下。<br>
&nbsp; &nbsp;UpdatePanel控件的ChildrenAsTrigger属性：<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指示UpdatePanel内部控件引起的回发是否产生当前UpdatePanel控件的局部更新。如果UpdateMode设为Always的话，那ChildrenAsTrigger局性必须设为True，否则运行出错。<br>
<br>
</span></span></p>
<p style="margin:0in; font-size:16.0pt"><span lang="zh-CN" style="font-family:宋体">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="24337849540068" alt=""><br>
</span></p>
<p style="margin:0in; font-size:16.0pt"><span lang="zh-CN" style="font-family:宋体"></span></p>
<p style="margin:0in; font-size:16.0pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN">实例</span><span lang="en-US">1</span><span lang="zh-CN">：</span></span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">1、updatepanel的updatemode设置为always，为默认&#20540;</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-size:16pt"><span style="font-family:KaiTi_GB2312">效果：不管哪个按钮，都会触发更新</span></span></p>
<br>
<pre code_snippet_id="137219" snippet_file_name="blog_20140101_1_2469301" name="code" class="html">&lt;title&gt;无标题页&lt;/title&gt; 
&lt;/head&gt; 
&lt;body&gt; 
&lt;form id=&quot;form1&quot; runat=&quot;server&quot;&gt; 
&lt;div&gt; 
&lt;/div&gt; 
&lt;asp:ScriptManager ID=&quot;ScriptManager1&quot; runat=&quot;server&quot;&gt; 
&lt;/asp:ScriptManager&gt; 
&lt;asp:UpdatePanel ID=&quot;UpdatePanel1&quot; runat=&quot;server&quot; UpdateMode=&quot;Always&quot;&gt; 
&lt;ContentTemplate&gt; 
&lt;% =DateTime.Now.ToString()%&gt; 
&lt;asp:Button ID=&quot;Button1&quot; runat=&quot;server&quot; Text=&quot;UpdatePanelButton&quot; /&gt; 
&lt;/ContentTemplate&gt; 
&lt;/asp:UpdatePanel&gt; 
&lt;asp:Button ID=&quot;Button2&quot; runat=&quot;server&quot; Text=&quot;Button&quot; /&gt; 
&lt;/form&gt; 
&lt;/body&gt; 
&lt;/html&gt;
</pre>
<p style="margin:0in; font-size:16.0pt"><span lang="zh-CN" style="font-family:宋体"><br>
</span></p>
<p style="margin:0in; font-size:16.0pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN">实例</span><span lang="en-US">2</span><span lang="zh-CN">：</span></span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">2、updatepanel的updatemode设置为conditional(ChildrenTriggers=&quot;false&quot; 就是updatepanel中事件不触发更新)</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">效果：无论按哪个按钮都不更新</span></p>
<pre code_snippet_id="137219" snippet_file_name="blog_20140101_2_9928809" name="code" class="html">&lt;title&gt;无标题页&lt;/title&gt; 
&lt;/head&gt; 
&lt;body&gt; 
&lt;form id=&quot;form1&quot; runat=&quot;server&quot;&gt; 
&lt;div&gt; 
&lt;/div&gt; 
&lt;asp:ScriptManager ID=&quot;ScriptManager1&quot; runat=&quot;server&quot;&gt; 
&lt;/asp:ScriptManager&gt; 
&lt;asp:UpdatePanel ID=&quot;UpdatePanel1&quot; runat=&quot;server&quot; UpdateMode=&quot;Conditional&quot; ChildrenAsTriggers=&quot;false&quot;&gt; 
&lt;ContentTemplate&gt; 
&lt;% =DateTime.Now.ToString()%&gt; 
&lt;asp:Button ID=&quot;Button1&quot; runat=&quot;server&quot; Text=&quot;UpdatePanelButton&quot; /&gt; 
&lt;/ContentTemplate&gt; 
&lt;/asp:UpdatePanel&gt; 
&lt;asp:Button ID=&quot;Button2&quot; runat=&quot;server&quot; Text=&quot;Button&quot; /&gt; 
&lt;/form&gt; 
&lt;/body&gt; 
&lt;/html&gt;
</pre><br>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">3、触发器</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">Triggers：分别为AsyncPostBackTrigger和PostBackTrigger</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">AsyncPostBackTrigge用来指定某个服务器端控件以及其将触发的服务器端事件作为该UpdatePanel的异步更新触发器，它需要设置的属性有控件ID和服务端控件的事件；PostBackTrigger用来指定在UpdatePanel中的某个服务端控件，它所引发的回送不使用异步回送，而仍然是传统的整页回送</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">&nbsp;</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">应用：</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">&nbsp;</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">&nbsp; &nbsp; 如果页面上有多个UpdatePanel控件，如果要实现外部的控件的回发引发指定UpdatePanel的更新的话，那应当为要实现刷新的UpdatePanel控件建立一个触发器。</span></p>
<p style="margin:0in; font-family:宋体; font-size:16.0pt"><br>
</p>
<pre code_snippet_id="137219" snippet_file_name="blog_20140101_3_9514105" name="code" class="html"> &lt;asp:UpdatePanel ID=&quot;UpdatePanel2&quot; runat=&quot;server&quot; RenderMode=&quot;Inline&quot; UpdateMode=&quot;Conditional&quot;&gt;
                &lt;ContentTemplate&gt;
                    &lt;asp:Label ID=&quot;Label3&quot; runat=&quot;server&quot; Text=&quot;Label&quot;&gt;&lt;/asp:Label&gt;
                &lt;/ContentTemplate&gt;
                &lt;Triggers&gt;
                    &lt;asp:AsyncPostBackTrigger ControlID=&quot;Button2&quot; EventName=&quot;Click&quot; /&gt;
                &lt;/Triggers&gt;
            &lt;/asp:UpdatePanel&gt;
            &lt;asp:Button ID=&quot;Button2&quot; runat=&quot;server&quot; OnClick=&quot;Button2_Click&quot; Text=&quot;ButtonOut&quot; /&gt;
</pre><br>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">需要注意的是：</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">&nbsp; &nbsp; 把所有的UpdatePanel控件的UpdateMode设为&quot;Conditional&quot;，这样才能够针对建有相关触发器的UpdatePanel更新。</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312">&nbsp; &nbsp; 一个UpdatePanel上可以建有多个触发器，实现在不同的情况下对该UpdatePanel控件内容的更新。</span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312"><br>
</span></p>
<p style="margin:0in; font-size:16.0pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN">实例</span><span lang="en-US">3</span><span lang="zh-CN">：运行了发现点击button2的时候只更新了updatepanel内部的时间</span></span></p>
<p style="margin:0in; font-size:16.0pt"><span lang="zh-CN" style="font-family:宋体"></span></p>
<pre code_snippet_id="137219" snippet_file_name="blog_20140101_4_6275502" name="code" class="html">&lt;title&gt;无标题页&lt;/title&gt; 
&lt;/head&gt; 
&lt;body&gt; 
&lt;form id=&quot;form1&quot; runat=&quot;server&quot;&gt; 
&lt;asp:ScriptManager ID=&quot;ScriptManager1&quot; runat=&quot;server&quot;&gt; 
&lt;/asp:ScriptManager&gt; 
&lt;asp:UpdatePanel ID=&quot;UpdatePanel1&quot; runat=&quot;server&quot; UpdateMode=&quot;Always&quot;&gt; 
&lt;ContentTemplate&gt; 
&lt;% =DateTime.Now.ToString()%&gt; 
&lt;/ContentTemplate&gt; 
&lt;Triggers&gt; 
&lt;asp:AsyncPostBackTrigger ControlID=&quot;Button2&quot; EventName=&quot;Click&quot; /&gt; 
&lt;/Triggers&gt; 
&lt;/asp:UpdatePanel&gt; 
&lt;br /&gt; 
&lt;% =DateTime.Now.ToString()%&gt; 
&lt;asp:Button ID=&quot;Button2&quot; runat=&quot;server&quot; Text=&quot;Button&quot; /&gt; 
&lt;/form&gt; 
&lt;/body&gt; 
&lt;/html&gt;
</pre><br>
<p>
<p style="margin:0in; font-size:16.0pt"><span style="font-family:KaiTi_GB2312">实例4：</span></p>
<p style="margin:0in; font-size:16.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">4</span><span lang="zh-CN">、</span><span lang="en-US">U</span><span lang="en-US">pdatePanel</span><span lang="zh-CN">的</span><span lang="en-US">Update</span><span lang="zh-CN">方法：强制某个</span><span lang="en-US">U</span><span lang="en-US">pdatePanel</span><span lang="zh-CN">更新</span></span></p>
<p style="margin:0in; font-family:宋体; font-size:16.0pt"><br>
</p>
<p style="margin:0in; font-family:宋体; font-size:16.0pt">
<pre code_snippet_id="137219" snippet_file_name="blog_20140101_5_2164848" name="code" class="html">&lt;asp:ScriptManager ID=&quot;ScriptManager1&quot; runat=&quot;server&quot;&gt; 
&lt;/asp:ScriptManager&gt; 
&lt;asp:UpdatePanel ID=&quot;UpdatePanel1&quot; runat=&quot;server&quot; UpdateMode=&quot;Conditional&quot;&gt; 
&lt;ContentTemplate&gt; 
&lt;% =DateTime.Now.ToString()%&gt; 
&lt;/ContentTemplate&gt; 
&lt;/asp:UpdatePanel&gt; 
&lt;br /&gt; 
&lt;asp:Button ID=&quot;Button1&quot; runat=&quot;server&quot; Text=&quot;Button&quot; /&gt; 
</pre><br>
<pre code_snippet_id="137219" snippet_file_name="blog_20140101_6_8369836" name="code" class="csharp"> protected void Page_Load(object sender, EventArgs e)
        {
            //将控件注册为异步回发的触发器。
            ScriptManager1.RegisterAsyncPostBackControl(this.Button1);
        }

 protected void Button1_Click(object sender, EventArgs e)
        {
                 this.UpdatePanel1.Update(); 
        } 
</pre><br>
<br>
<p style="margin:0in; font-size:16.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">5</span><span lang="zh-CN">、</span><span lang="en-US">U</span><span lang="en-US">pdateProgress</span></span></p>
<p style="margin:0in; font-size:16.0pt"><span lang="en-US"><span style="font-family:KaiTi_GB2312"><br>
</span></span></p>
<p style="margin:0in; font-size:16pt"><span style="font-family:KaiTi_GB2312"><span style="font-family:KaiTi_GB2312; font-size:21px">属性：</span></span></p>
<p style="margin:0in; font-size:16.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">D</span><span lang="en-US">ynamicLayout</span><span lang="zh-CN">：隐藏时是否占位，默认&#20540;为</span><span lang="en-US">true</span></span></p>
<p style="margin:0in; font-size:16.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">D</span><span lang="en-US">isplayAfter</span><span lang="zh-CN">：延迟多少时间后显示，单位毫秒，默认&#20540;为</span><span lang="en-US">500</span></span></p>
<p style="margin:0in; font-size:16.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">A</span><span lang="en-US">ssociatedUpdatePanelID:</span><span lang="zh-CN">关联的</span><span lang="en-US">U</span><span lang="en-US">pdatePanel</span><span lang="zh-CN">的</span><span lang="en-US">ID,</span><span lang="zh-CN">默认为</span><span lang="en-US">null</span><span lang="zh-CN">。</span></span></p>
<br>
<br>
<p><br>
</p>
<p><span lang="en-US" style="font-family:KaiTi_GB2312; font-size:21px"><span style="font-family:KaiTi_GB2312; font-size:21px">总结：</span></span></p>
<p><span lang="en-US" style="font-family:KaiTi_GB2312; font-size:21px">&nbsp; &nbsp; U</span><span lang="en-US" style="font-family:KaiTi_GB2312; font-size:21px">pdatePanel确实很实用，但是我们在使用过程中一定要注意它给我们带来的问题，可能弹出框不显示等，使用的话确保<span lang="en-US" style="font-family:KaiTi_GB2312; font-size:21px">U</span><span lang="en-US" style="font-family:KaiTi_GB2312; font-size:21px">pdatePanel包含的内容都是自己需要不更新的部分。</span></span></p>
<p><span lang="en-US" style="font-family:KaiTi_GB2312; font-size:21px"><span lang="en-US" style="font-family:KaiTi_GB2312; font-size:21px"><br>
</span></span></p>
<p><span lang="en-US" style="font-family:KaiTi_GB2312; font-size:21px"><span lang="en-US" style="font-family:KaiTi_GB2312; font-size:21px"><br>
</span></span></p>
<p><br>
</p>
   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/hejingyuan6/article/details/17400745'>原文链接</a>