<div class="articleLocationOnion"><a href='../../index.html'>首页: </a> &gt; <a href='../index_s.html'>未分类</a> &gt; 【SSH基础】浅谈Hibernate关系映射（4）</div><div style="color:blue" align=center>【SSH基础】浅谈Hibernate关系映射（4）</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">

<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">继上篇博客</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp;</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">多对多关联映射（单向）</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp;</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">多对多对象关系映射，需要加入一张新表完成基本映射。</p>
<ul type="disc" style="margin-left:.375in; direction:ltr; unicode-bidi:embed; margin-top:0in; margin-bottom:0in">
<li style="margin-top:0; margin-bottom:0; vertical-align:middle"><span lang="en-US" style="font-family:Calibri; font-size:14.0pt">Hibernate</span><span lang="zh-CN" style="font-family:华文中宋; font-size:14.0pt">会自动生成中间表</span></li><li style="margin-top:0; margin-bottom:0; vertical-align:middle"><span lang="en-US" style="font-family:Calibri; font-size:14.0pt">Hibernate</span><span lang="zh-CN" style="font-family:华文中宋; font-size:14.0pt">使用</span><span lang="en-US" style="font-family:Calibri; font-size:14.0pt">many</span><span lang="en-US" style="font-family:华文中宋; font-size:14.0pt">-to-many</span><span lang="zh-CN" style="font-family:华文中宋; font-size:14.0pt">标签来表示多对多的关联，多对多的关联映射，在实体类中，跟一对多一样，也是用集合来表示的。</span></li></ul>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp;</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">如下图所示</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<img src="311379610331008" alt=""><br>
</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">
<p style="margin:0in; font-size:14.0pt"><span lang="zh-CN" style="font-family:华文中宋">通过</span><span lang="en-US" style="font-family:Calibri">User</span><span lang="zh-CN" style="font-family:华文中宋">可以查看</span><span lang="en-US" style="font-family:Calibri">Role</span><span lang="zh-CN" style="font-family:华文中宋">的信息</span></p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp;</p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:Calibri">User</span><span lang="zh-CN" style="font-family:华文中宋">的映射文件</span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="zh-CN" style="font-family:华文中宋"></span></p>
<pre name="code" class="html">&lt;hibernate-mapping&gt;
	&lt;class name=&quot;com.bjpowernode.hibernate.User&quot;&gt;
		&lt;id name=&quot;id&quot;&gt;
			&lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;
		&lt;/id&gt;
		&lt;property name=&quot;name&quot;&gt;&lt;/property&gt;
		&lt;set name=&quot;roles&quot; table=&quot;t_user_role&quot;&gt;
			&lt;key column=&quot;user_id&quot;&gt;&lt;/key&gt;
			&lt;many-to-many class=&quot;com.bjpowernode.hibernate.Role&quot; column=&quot;role_id&quot;&gt;&lt;/many-to-many&gt;
		&lt;/set&gt;		
	&lt;/class&gt;	
&lt;/hibernate-mapping&gt;
</pre><br>
<p>
<p style="margin:0in; font-size:14.0pt"><span lang="zh-CN" style="font-family:华文中宋"></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:Calibri">Role</span><span lang="zh-CN" style="font-family:华文中宋">的映射文件</span></p>
<pre name="code" class="html">&lt;hibernate-mapping&gt;
	&lt;class name=&quot;com.bjpowernode.hibernate.Role&quot;&gt;
		&lt;id name=&quot;id&quot;&gt;
			&lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;
		&lt;/id&gt;
		&lt;property name=&quot;name&quot;&gt;&lt;/property&gt;	
	&lt;/class&gt;	
&lt;/hibernate-mapping&gt;
</pre><br>
<p style="margin:0in; font-size:14.0pt"><span lang="zh-CN" style="font-family:华文中宋"></span></p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">多对多关联映射（双向）</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp;</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">双向多对多对象关系映射，是两端都能将对方加载上来，双向都需要加上标签映射。</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">要注意：</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">*生成中间表名必须一样</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">*生成中间表字段必须一样</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="3514765663669" alt=""><br>
</p>
<br>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:Calibri">User</span><span lang="zh-CN" style="font-family:华文中宋">的映射文件：</span></p>
<pre name="code" class="html">&lt;hibernate-mapping&gt;
	&lt;class name=&quot;com.bjpowernode.hibernate.User&quot;&gt;
		&lt;id name=&quot;id&quot;&gt;
			&lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;
		&lt;/id&gt;
		&lt;property name=&quot;name&quot;&gt;&lt;/property&gt;
		&lt;set name=&quot;roles&quot; table=&quot;t_user_role&quot;&gt;
			&lt;key column=&quot;user_id&quot;&gt;&lt;/key&gt;
			&lt;many-to-many class=&quot;com.bjpowernode.hibernate.Role&quot; column=&quot;role_id&quot;&gt;&lt;/many-to-many&gt;
		&lt;/set&gt;		
	&lt;/class&gt;	
&lt;/hibernate-mapping&gt;
</pre><br>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:Calibri">Role</span><span lang="zh-CN" style="font-family:华文中宋">的映射文件</span></p>
<pre name="code" class="html">&lt;hibernate-mapping&gt;
	&lt;class name=&quot;com.bjpowernode.hibernate.Role&quot;&gt;
		&lt;id name=&quot;id&quot;&gt;
			&lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;
		&lt;/id&gt;
		&lt;property name=&quot;name&quot;&gt;&lt;/property&gt;
		&lt;set name=&quot;users&quot; table=&quot;t_user_role&quot;&gt;
			 &lt;key column=&quot;role_id&quot;&gt;&lt;/key&gt;
			 &lt;many-to-many class=&quot;com.bjpowernode.hibernate.User&quot;&gt;&lt;/many-to-many&gt;
		&lt;/set&gt;
	&lt;/class&gt;	
&lt;/hibernate-mapping&gt;
</pre><br>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">区别：单向多对多和双向多对多存储结构没有任何的区别，但他们的映射文件是有区别的，加载过程是不同的。</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp;</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp;</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">关系映射总结</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp;</p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp; &nbsp; &nbsp; 综上所述，可以看出，同一类映射，无论是单向还是双向，他们的存储结构是相同的，之所以映射文件不同，是因为加载时不同（在增删改时）即要通过谁能看到谁，还是互相都能看到。</p>
<p style="margin:0in; font-size:14.0pt"><span lang="zh-CN" style="font-family:华文中宋">&nbsp; &nbsp; &nbsp; 无论是一对多，多对多，还是一对一等关系，例如：</span><span lang="en-US" style="font-family:Calibri">Student</span><span lang="en-US" style="font-family:华文中宋">---</span><span lang="zh-CN" style="font-family:华文中宋">》</span><span lang="en-US" style="font-family:华文中宋">IdCard</span><span lang="zh-CN" style="font-family:华文中宋">，学生想知道卡信息，那么</span><span lang="en-US" style="font-family:Calibri">Student</span><span lang="zh-CN" style="font-family:华文中宋">端就会有</span><span lang="en-US" style="font-family:Calibri">IdCard</span><span lang="zh-CN" style="font-family:华文中宋">的引用，反过来也就是双向的关系的话，通过</span><span lang="en-US" style="font-family:Calibri">IdCard</span><span lang="zh-CN" style="font-family:华文中宋">想要知道</span><span lang="en-US" style="font-family:Calibri">Student</span><span lang="zh-CN" style="font-family:华文中宋">的信息，那么</span><span lang="en-US" style="font-family:Calibri">IdCard</span><span lang="zh-CN" style="font-family:华文中宋">端就要要</span><span lang="en-US" style="font-family:Calibri">Student</span><span lang="zh-CN" style="font-family:华文中宋">的引用（实体关系上的体现）！</span></p>
<p style="margin:0in; font-family:华文中宋; font-size:14.0pt">&nbsp;</p>
<p><br>
</p>
<p><br>
</p>
   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/hejingyuan6/article/details/38365367'>原文链接</a>