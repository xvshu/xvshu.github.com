<div class="articleLocationOnion"><a href='../../index.html'>首页: </a> &gt; <a href='../index_s.html'>未分类</a> &gt; Eclipse上搭建SSH（struts223+spring256+hibernate368）框架附源码</div><div style="color:blue" align=center>Eclipse上搭建SSH（struts223+spring256+hibernate368）框架附源码</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">

<p style="margin:0in; font-size:14.0pt"><span lang="zh-CN" style="font-family:SimSun"><br>
</span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312">一直想自己搭建一个ssh框架，这次由于编写demo的需要，就亲手搭建了一下，并逐步测试！下面进入正题：</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312"><br>
</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312"><br>
</span></span></p>
<h1 style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN">创建</span><span lang="en-US">Struts</span><span lang="en-US">项目</span></span></h1>
<p lang="en-US" style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">&nbsp;</span></p>
<h2 style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">整合步骤：</span></h2>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">&nbsp;</span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">1</span><span lang="zh-CN">，在</span><span lang="en-US">Eclipse</span><span lang="en-US">中创建一个</span><span lang="en-US">DynamicWeb Project</span><span lang="en-US">，本文项目名称为</span><span lang="en-US">SSH</span><span lang="en-US">。</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">2</span><span lang="zh-CN">，添加相应的</span><span lang="en-US">jar</span><span lang="zh-CN">包，放到</span><span lang="en-US">SSH</span><span lang="en-US">项目下的</span><span lang="en-US">WEB-INF/lib</span><span lang="zh-CN">下</span><span lang="en-US">。</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span style="font-family:KaiTi_GB2312">&nbsp; &nbsp; &nbsp;&nbsp;<img src="12942136462791" alt=""><br>
</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US"></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">3，建立struts配置文件。</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US"><br>
</span></span></p>
<h2 style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">编写相应的测试代码：</span></span></h2>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US"><br>
</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">1</span><span lang="zh-CN">，在</span><span lang="en-US">src</span><span lang="en-US">目录下创建相应</span><span lang="en-US">package</span><span lang="en-US">。</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">2</span><span lang="zh-CN">，在</span><span lang="en-US">WebContent</span><span lang="en-US">下创建</span><span lang="en-US">Register.jsp</span><span lang="en-US">文件，并分别创建注册成功和注册失败的</span><span lang="en-US">Success.jsp</span><span lang="en-US">和</span><span lang="en-US">Fail.jsp</span><span lang="en-US">。</span></span></p>
<p lang="en-US" style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">&nbsp;</span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">操作完成后的结构图：（由于自己在做这一步的时候没有记录，就直接拿来别人的图来用，几乎完全相&#20284;）</span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><br>
</span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><img src="43302866582738" alt=""><br>
</span></p>
<span style="font-family:KaiTi_GB2312"><br>
</span>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span style="font-family:KaiTi_GB2312"><span lang="en-US"><br>
</span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span style="font-family:KaiTi_GB2312"><span lang="en-US">Struts代码<span style="color:#990000">（切记：添加namespace属性，如果不添加，可能会报错，找不到返回页面）</span></span><span lang="zh-CN">：</span></span><br>
</span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:SimSun"><span lang="zh-CN" style="font-family:SimSun"><br>
</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:SimSun"><span lang="zh-CN" style="font-family:SimSun"></span></span></p>
<pre code_snippet_id="518158" snippet_file_name="blog_20141113_1_5483500" name="code" class="html">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE struts PUBLIC &quot;-//Apache Software Foundation//DTD Struts Configuration 2.1//EN&quot; &quot;http://struts.apache.org/dtds/struts-2.1.dtd&quot;&gt;
&lt;struts&gt;

&lt;!-- 问题一：无 namespace=&quot;/&quot; 报错，找不到返回值 hejingyuan--&gt;

	&lt;include file=&quot;struts-default.xml&quot; /&gt;  
    &lt;package name=&quot;hjy&quot; extends=&quot;struts-default&quot;  namespace=&quot;/&quot;&gt;  
        &lt;action name=&quot;register&quot; class=&quot;regAction&quot;&gt; 
         	&lt;result name=&quot;input&quot;&gt;/Register.jsp&lt;/result&gt;             
            &lt;result name=&quot;success&quot;&gt;/Success.jsp&lt;/result&gt;  
            &lt;result name=&quot;error&quot;&gt;/Fail.jsp&lt;/result&gt;          
        &lt;/action&gt;  
    &lt;/package&gt; 
&lt;/struts&gt;
</pre><br>
<p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">效果图：</span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><br>
</span></p>
<p><span style="font-family:KaiTi_GB2312"><img src="2355825912047" alt=""></span></p>
<p><span style="font-family:KaiTi_GB2312"><br>
</span></p>
<p><span style="font-family:KaiTi_GB2312"><img src="18109388455546" alt=""><br>
</span></p>
<h1 style="margin:0in; font-size:14pt">
<p style="margin:0in; font-size:14.0pt"><span style="font-weight:normal"><br>
</span></p>
</h1>
<h1 style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312">在struts基础上整合Hibernate</span></h1>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN"><br>
</span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN">整合</span><span lang="en-US">Hibernate</span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US"><br>
</span></span></p>
<h2 style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">整合步骤：</span></h2>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><br>
</span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">1</span><span lang="zh-CN">，引入相应的</span><span lang="en-US">jar</span><span lang="zh-CN">包，放到</span><span lang="en-US">SSH</span><span lang="en-US">项目下的</span><span lang="en-US">WEB-INF/lib</span><span lang="zh-CN">下</span><span lang="en-US">。</span></span></p>
<span style="font-family:KaiTi_GB2312">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="39660329404884" alt=""><br>
</span>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN"></span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US"></span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US"><span lang="en-US" style="font-family:KaiTi_GB2312; font-size:19px">2</span><span lang="zh-CN" style="font-family:KaiTi_GB2312; font-size:19px">，建立</span><span lang="en-US" style="font-family:KaiTi_GB2312; font-size:19px">Hibernate配置文件。</span><br>
</span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">3</span><span lang="zh-CN">，创建</span><span lang="en-US">user表的Hibernate映射文件。</span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">&nbsp; &nbsp;说明：因为这里要创建user表对应的POJO类，所以我这里把之前com.ynwi.ssh.beans包改成com.ynwi.ssh.forms包，用来存放页面传过来的表单数据，新创建com.ynwi.ssh.beans包，用来创建POJO对象来对应数据库中的表</span></span></p>
<p style="margin:0in; font-size:14pt"><br>
</p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US"><br>
</span></span></p>
<br>
<h2 style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312">修改测试代码：</span></h2>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><br>
</span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">1</span><span lang="zh-CN">，创建BaseDao接口和UserDao类</span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">2</span><span lang="zh-CN">，编写</span><span lang="en-US">Session工厂类。</span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">&nbsp; &nbsp;说明：整合Spring后，数据源的创建和SessionFactory的创建都交给Spring去管理，就无需这个工厂类了，所以这里</span><span lang="zh-CN">我们</span><span lang="en-US">临时创建在daoImpl包里面。</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">3</span><span lang="zh-CN">，修改业务逻辑实现类。</span></span></p>
<span style="font-family:KaiTi_GB2312"><br>
</span>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312">操作完成后的结构如图所示：<br>
</span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312"><img src="23882578282811" alt=""><br>
</span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312"><br>
</span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312">Hibernate配置文件Hibernate.cfg.xml的内容<br>
</span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:SimSun"><span lang="zh-CN" style="font-family:SimSun"><br>
</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:SimSun"><span lang="zh-CN" style="font-family:SimSun"></span></span></p>
<pre code_snippet_id="518158" snippet_file_name="blog_20141113_2_8845340" name="code" class="html">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE hibernate-configuration PUBLIC
		&quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;
		&quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;
&lt;hibernate-configuration&gt;  
  &lt;session-factory&gt;  
    &lt;!-- Database connection settings --&gt;  
    &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;  
    &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://127.0.0.1/ssh&lt;/property&gt;  
    &lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;  
    &lt;property name=&quot;connection.password&quot;&gt;hejingyuan&lt;/property&gt;  
  
    &lt;!-- JDBC connection pool (use the built-in) --&gt;  
    &lt;!-- &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt; --&gt;  
  
    &lt;!-- SQL dialect --&gt; 
      
    &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;
    &lt;!-- Enable Hibernate&#39;s automatic session context management --&gt;  
    &lt;!-- &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt; --&gt;  
  
   
    &lt;!-- Echo all executed SQL to stdout --&gt;  
    &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;  
  

    &lt;!-- Drop and re-create the database schema on startup --&gt;  
    &lt;!-- &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt; --&gt;
    &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;create&lt;/property&gt;  
    
    &lt;mapping resource=&quot;com/hjy/ssh/beans/User.hbm.xml&quot;/&gt;  
  &lt;/session-factory&gt;  
&lt;/hibernate-configuration&gt;  </pre>
<p><br>
</p>
<p><span style="font-family:KaiTi_GB2312; font-size:18px"><span lang="zh-CN">工厂类</span><span lang="en-US">SessionFactory的内容。<span style="color:#990000; background-color:rgb(255,255,255)">（这是使用Hibernate3时候的SessionFactory，Hibernate4时候sessionFactory的创建估计会不一样，请自行查阅。</span></span><span style="color:#990000; background-color:rgb(255,255,255)"><span lang="zh-CN">参考资料给的是</span><span lang="en-US">Hibernate4</span><span lang="zh-CN">这里进行了修改</span><span lang="en-US">）</span></span></span><span style="background-color:rgb(0,0,0)"><br>
</span></p>
<p><span lang="en-US"><br>
</span></p>
<p><span lang="en-US"></span></p>
<pre code_snippet_id="518158" snippet_file_name="blog_20141113_3_5139763" name="code" class="java">package com.hjy.ssh.action;

import com.opensymphony.xwork2.ActionSupport;  
import com.hjy.ssh.forms.UserForm;
import com.hjy.ssh.service.UserManager;  
import com.hjy.ssh.serviceImpl.UserManagerImpl;  
	  
	public class RegisterAction extends ActionSupport {  
	  
	    private static final long serialVersionUID = 1L;  
	  
	    private UserForm user;  
	  
	    private UserManager userManager;  
	  
	    public UserForm getUser() {  
	        return user;  
	    }  
	  
	    public void setUser(UserForm user) {  
	        this.user = user;  
	    }  
	  
	    public UserManager getUserManager() {  
	        return userManager;  
	    }  
	  
	    public void setUserManager(UserManager userManager) {  
	        this.userManager = userManager;  
	    }  
	  
	    public String execute() {  
	        try {  
	            this.setUserManager(new UserManagerImpl()); 
	            userManager.regUser(user);  
	            return SUCCESS;  
	  
	        } catch (Exception e) {  
	            e.printStackTrace();  
	            return ERROR;  
	        }  
	    }
}
</pre><br>
<p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312">运行效果：</span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312"><br>
</span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312"><img src="30359786749913" alt=""><br>
</span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312"></span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN"></span></span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN"><br>
</span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN"><br>
</span></span></p>
<h1 style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN">在</span><span lang="en-US">Struts &#43; Hibernate项目中整合Spring</span></span></h1>
<p lang="en-US" style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">&nbsp;</span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN">整合</span><span lang="en-US">Spring</span></span></p>
<p style="margin:0in; font-size:14pt"><br>
</p>
<h2 style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">整合步骤：</span></h2>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><br>
</span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">1</span><span lang="zh-CN">，将</span><span lang="en-US">Spring内libs目录下包含所有的jar包</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">&nbsp; &nbsp;&nbsp;<img src="28657926510338" alt=""><br>
</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">2</span><span lang="zh-CN">，编写</span><span lang="en-US">Spring的配置文件applicationContext.xml。</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US"></span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">3</span><span lang="zh-CN">，删除</span><span lang="en-US">Hibernate的配置文件Hibernate.cfg.xml和工厂类HibernateSesseionFactory类。</span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">4</span><span lang="zh-CN">，修改</span><span lang="en-US">web.xml，加载Spring。<span lang="zh-CN" style="font-family:KaiTi_GB2312; font-size:19px">修改</span><span lang="en-US" style="font-family:KaiTi_GB2312; font-size:19px">Struts的配置文件struts.xml</span></span></span></p>
<p lang="en-US" style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">&nbsp; &nbsp; &nbsp;说明:想启动时加载Spring的配置文件，需要在web.xml中配置对应的监听器（listenser），并制定Spring的配置文件。</span></p>
<p lang="en-US" style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">&nbsp; &nbsp; &nbsp;说明:原来指定的名为register的action的class由原来的路径变为applicationContext.xml文件中该Action的id。</span></p>
<br>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US"><br>
</span></span></p>
<h2 style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">修改相应的测试代码：</span></span></h2>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US"><br>
</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">1</span><span lang="zh-CN">，修改</span><span lang="en-US">BaseDao和UserDao。</span></span></p>
<p lang="en-US" style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">&nbsp; &nbsp;说明：在引入Spring后，需要用Spring进行统一的事务管理，数据源和sessionFactory都交给Spring去生成，因此接口类和实现类BaseDao和UserDao都需要做相应的修改。Spring提供了HibernateDaoSupport类来完成对数据的操作，因此UserDao在实现BaseDao的同时还需要继承HibernateDaoSupport类。并将先前session的操作修改成HibernateTemplate（可通过getHibernateTemplate（）方法来获得）的操作。</span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><span lang="en-US">2</span><span lang="zh-CN">，修改业务逻辑实现类。</span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN">&nbsp; &nbsp;说明：在没有加入</span><span lang="en-US">Spring之前，业务逻辑实现类的Session的获得，dao的实例化，以及事务的管理都是该类执行管理的。加入Spring后，这些都交给Spring去管理。该类的dao的实例化由Spring注入。</span></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN">修改用户注册的</span><span lang="en-US">RegisterAction类。同样，RegisterAction类中的userManager的实例化也由Spring注入。</span></span></p>
<p><span style="font-family:KaiTi_GB2312"><br>
</span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span lang="zh-CN"><span style="font-family:KaiTi_GB2312"><span lang="zh-CN">Spring的配置文件</span><span lang="en-US">applicationContext.xml的内容</span><br>
</span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:SimSun"><span lang="zh-CN" style="font-family:SimSun"><span lang="en-US"><br>
</span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:SimSun"><span lang="zh-CN" style="font-family:SimSun"><span lang="en-US"></span></span></span></p>
<pre code_snippet_id="518158" snippet_file_name="blog_20141113_4_637017" name="code" class="html">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;  
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;  
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans  
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;  
  
    &lt;!-- 定义数据源的信息 --&gt;  
    
    &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;
		&lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;
		&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://127.0.0.1/ssh&quot;&gt;&lt;/property&gt;
		&lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;
		&lt;property name=&quot;password&quot; value=&quot;hejingyuan&quot;&gt;&lt;/property&gt;
	&lt;/bean&gt;
  
    &lt;!--定义Hibernate的SessionFactory --&gt;  
    &lt;!-- SessionFactory使用的数据源为上面的数据源 --&gt;  
    &lt;!-- 指定了Hibernate的映射文件和配置信息 --&gt;  
    &lt;bean id=&quot;sessionFactory&quot;  
        class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;  
        &lt;property name=&quot;dataSource&quot;&gt;  
            &lt;ref local=&quot;dataSource&quot; /&gt;  
        &lt;/property&gt;  
        &lt;property name=&quot;mappingResources&quot;&gt;  
            &lt;list&gt;  
                &lt;value&gt;com/hjy/ssh/beans/User.hbm.xml&lt;/value&gt;  
            &lt;/list&gt;  
        &lt;/property&gt;  
        &lt;property name=&quot;hibernateProperties&quot;&gt;  
            &lt;props&gt;  
                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;  
                &lt;prop key=&quot;show_sql&quot;&gt;true&lt;/prop&gt;  
                &lt;prop key=&quot;hibernate.jdbc.batch_size&quot;&gt;20&lt;/prop&gt;  
            &lt;/props&gt;  
        &lt;/property&gt;  
    &lt;/bean&gt;  
  
    &lt;bean id=&quot;transactionManager&quot;  
        class=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;&gt;  
        &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;  
    &lt;/bean&gt;  
  
    &lt;bean id=&quot;baseDao&quot; class=&quot;com.hjy.ssh.daoImpl.UserDao&quot;&gt;  
        &lt;property name=&quot;sessionFactory&quot;&gt;  
            &lt;ref bean=&quot;sessionFactory&quot; /&gt;  
        &lt;/property&gt;  
    &lt;/bean&gt;  
  
    &lt;!--用户注册业务逻辑类 --&gt;  
    &lt;bean id=&quot;userManager&quot; class=&quot;com.hjy.ssh.serviceImpl.UserManagerImpl&quot;&gt;  
        &lt;property name=&quot;baseDao&quot; ref=&quot;baseDao&quot;&gt;              
        &lt;/property&gt;  
    &lt;/bean&gt;  
   
    
    &lt;!-- 用户注册的Action --&gt;  
    &lt;bean id=&quot;regAction&quot; class=&quot;com.hjy.ssh.action.RegisterAction&quot;&gt;  
        &lt;property name=&quot;userManager&quot; ref=&quot;userManager&quot;&gt;          
        &lt;/property&gt;  
    &lt;/bean&gt;  
  
    &lt;!-- more bean definitions go here --&gt;  
  
&lt;/beans&gt;  
</pre><br>
<br>
<p><span style="font-family:KaiTi_GB2312; font-size:18px"><span lang="zh-CN">修改后的业务逻辑实现类</span><span lang="en-US">UserManagerImpl的内容</span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:SimSun"><span lang="zh-CN" style="font-family:SimSun"><span lang="en-US"><span lang="en-US"><br>
</span></span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:SimSun"><span lang="zh-CN" style="font-family:SimSun"><span lang="en-US"><span lang="en-US"></span></span></span></span></p>
<pre code_snippet_id="518158" snippet_file_name="blog_20141113_5_9930063" name="code" class="java">package com.hjy.ssh.serviceImpl;

import org.hibernate.Session;

import com.hjy.ssh.beans.User;
import com.hjy.ssh.dao.BaseDao;
import com.hjy.ssh.daoImpl.HibernateSessionFactory;
import com.hjy.ssh.daoImpl.UserDao;
import com.hjy.ssh.forms.UserForm;
import com.hjy.ssh.service.UserManager;

import org.hibernate.HibernateException;   
import org.hibernate.Transaction;  
import org.springframework.beans.BeanUtils;
  


public class UserManagerImpl implements UserManager {

	 	private BaseDao baseDao;  
	  
	    /*private Session session;  */
	  
	    public BaseDao getBaseDao() {
			return baseDao;
		}

		public void setBaseDao(BaseDao baseDao) {
			this.baseDao = baseDao;
		}

		public UserManagerImpl() {  
	    	baseDao = new UserDao();  
	    }  
	  
	    @Override  
	    public void regUser(UserForm userForm) throws HibernateException {  
	        /*session = HibernateSessionFactory.getSession();  
	        dao.setSession(session);  
	        // 获取事务  
	        Transaction ts = session.beginTransaction();  
	        // 构造User对象  
	        User user = new User();  
	        user.setUsername(userForm.getUsername());  
	        user.setPassword(userForm.getPassword());  
	        user.setGender(userForm.getGender());  
	        // 保存User对象  
	        dao.saveObject(user);  
	        // 提交事务  
	        ts.commit();  
	        // 关闭Session  
	        HibernateSessionFactory.closeSession(session);  */
	    	
	    	 User user = new User();  
		     BeanUtils.copyProperties(userForm, user);  
		     baseDao.saveObject(user); 
	    }  
	  
	   
}
</pre><br>
<p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">运行结果：</span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><br>
</span></p>
<p><span style="font-family:KaiTi_GB2312"><img src="18453407820967" alt=""></span></p>
<p><span style="font-family:KaiTi_GB2312"><img src="33934239535387" alt=""><br>
</span></p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US"><span lang="zh-CN"><span lang="en-US"><span style="font-family:KaiTi_GB2312"><span lang="en-US"></span></span></span></span></span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312"><br>
</span></p>
<p style="margin:0in; font-size:14.0pt"><span style="font-family:KaiTi_GB2312">参考资料：<a target="_blank" target="_blank" href="http://blog.csdn.net/yeohcooller/article/details/9316923">参考博客</a></span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">&nbsp;</span></p>
<h1 style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">总结：</span></h1>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">&nbsp; &nbsp;</span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312">&nbsp; &nbsp;在搭建的过程中，可能会遇到很多问题，但只要我们懂得原理，其余的问题大部分还是我们不够细心，慢慢的调试即可！而且对于ssh框架的整合主要的工作还是引入相应的jar包，编写配置文件，然后用例进行相应的修改.</span></p>
<p style="margin:0in; font-size:14pt"><span style="font-family:KaiTi_GB2312"><br>
</span></p>
<p><a target="_blank" href="http://download.csdn.net/detail/hejingyuan6/8154933" target="_blank"><span style="font-size:18px">源码下载</span></a><br>
</p>
<p><br>
</p>
<p><br>
</p>
<p style="margin:0in; font-size:14.0pt"><span lang="en-US" style="font-family:SimSun"><span lang="zh-CN" style="font-family:SimSun"><br>
</span></span></p>
   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/hejingyuan6/article/details/41082565'>原文链接</a>