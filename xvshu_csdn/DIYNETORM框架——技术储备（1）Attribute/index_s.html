<div class="articleLocationOnion"><a href='../../index.html'>首页: </a> &gt; <a href='../index_s.html'>未分类</a> &gt; DIYNETORM框架——技术储备（1）Attribute</div><div style="color:blue" align=center>DIYNETORM框架——技术储备（1）Attribute</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">

<p>
<h1><span style="font-size:18px">1、他是什么 ？</span></h1>
<span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; 首先，我们肯定Attribute是一个类，下面是msdn文档对它的描述：&nbsp;<br>
&nbsp; &nbsp; &nbsp; &nbsp; 公共语言运行时允许你添加类&#20284;关键字的描述声明，叫做attributes, 它对程序中的元素进行标注，如类型、字段、方法和属性等。Attributes和Microsoft .NET Framework文件的元数据保存在一起，可以用来向运行时描述你的代码，或者在程序运行的时候影响应用程序的行为。</span>
<p>
<p><span style="font-size:18px"><br>
&nbsp; &nbsp; &nbsp; &nbsp; 其实特别简单：Attribute就是一种“附着物”，就像超市商品上贴的标签。这些附着物的作用是为它们的附着体追加上一些额外的信息（这些信息就保存在附着物的体内），在商品上就像他的标签，是否参与特价等信息。<br>
&nbsp;<br>
</span></p>
<h1><span style="font-size:18px">2、简单实例</span></h1>
<span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; 实现：商场有N种商品，在特价商品柜台只结账特价商品</span>
<p>
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; 类说明：</span></p>
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;Commodity：商品类</span></p>
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; Program：卖特价商品的前台<br>
</span></p>
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;[ConditionalAttribute(&quot;special&quot;)]：特价标签</span></p>
<p><span style="font-size:18px"><span style="white-space:pre">[ConditionalAttribute(&quot;normal&quot;)]</span>：非特价标签</span></p>
<p><span style="font-size:18px"><br>
</span></p>
<h2><span style="font-size:18px">代码：</span></h2>
<p>
<pre name="code" class="csharp">&lt;span style=&quot;font-size:18px;&quot;&gt;#define special  // C#的宏定义必须出现在所有代码之前。当前我们只让special宏有效。（代表特价商品）


using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Diagnostics; // 注意：这是为了使用包含在此名称空间中的ConditionalAttribute特性

namespace AttributeSample
{
    /// &lt;summary&gt;
    /// 商品类
    /// &lt;/summary&gt;
    class Commodity
    {
        //特价商品*********************************************************************************
        /// &lt;summary&gt;
        /// 卖蛋糕
        /// &lt;/summary&gt;
        [ConditionalAttribute(&quot;cake&quot;)]                                           // Attribute名称的长记法
        [ConditionalAttribute(&quot;special&quot;)]
        public static void sellCake() { Console.WriteLine(&quot;卖出的是蛋糕, 特性为：special（特价）.&quot;); }

        /// &lt;summary&gt;
        /// 卖饼干
        /// &lt;/summary&gt;
        [Conditional(&quot;cookies&quot;)]
        [Conditional(&quot;special&quot;)]
        public static void sellCookies() { Console.WriteLine(&quot;卖出的是饼干, 特性为：special（特价）.&quot;); }





        //普通商品*********************************************************************************
        /// &lt;summary&gt;
        /// 卖牛奶
        /// &lt;/summary&gt;
        [ConditionalAttribute(&quot;Milk&quot;)]
        [ConditionalAttribute(&quot;normal&quot;)]
        public static void sellMilk() { Console.WriteLine(&quot;卖出的是牛奶, 特性为：normal（普通）.&quot;); }

        /// &lt;summary&gt;
        /// 卖面包
        /// &lt;/summary&gt;
        [Conditional(&quot;Bread&quot;)]                                               // Attribute名称的短记法
        [Conditional(&quot;normal&quot;)]
        public static void sellBread() { Console.WriteLine(&quot;卖出的是面包, 特性为：normal（普通）.&quot;); }
      

        
    }

    class Program
    {
        static void Main(string[] args)
        {
            //商品的商品都可在前台扫描
            Commodity.sellCake();
            Commodity.sellCookies();
            Commodity.sellMilk();
            Commodity.sellBread();
        }
    }


}
&lt;/span&gt;</pre><span style="font-size:18px"><br>
</span>
<h2><span style="font-size:18px">执行结果：</span></h2>
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="8271526261805" alt=""><br>
</span></p>
<p><span style="font-size:18px"><br>
</span></p>
<h2><span style="font-size:18px">结果分析：</span></h2>
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; 为什么四个方法只有两个执行了？大家再仔细观察，发现只有特性为special的方法被执行了，我们研究&nbsp;ConditionalAttribute 发现，这个类的作用就是检测方法的特性，与提前定义好的特性相符的才会执行，否则不执行，大家别想得太深奥，实际就是一个拦截器，Attribute 这时候的作用就体现了出来，他的影响程序执行的，所以他并不是和注释一样被编译器屏蔽，但是又和普通的属性不一样，我们通过一个直接的英语翻译来看看他们在语义上的区别：</span></p>
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; Attribute：认为…是; 把…归于; 把…品质归于某人; 认为某事[物]属于某人[物];&nbsp;<br>
</span></p>
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; property：特性，属性; 财产，地产; [戏]道具; 所有权;&nbsp;<br>
</span></p>
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; 就好像我们定义一个房子，里面有客厅，卧室，餐厅，这是属于这个房子的一部分，是property，而房子分为阴面和阳面，我们将客厅和餐厅打上标签是阳面，卧室是阴面，这是Attribute，他们都是为了描述一事物，当我们写“class Commodity”这句代码时，实际系统给我们自动打上了一个Attribute：“class” !</span></p>
<p><span style="font-size:18px"><br>
</span></p>
<h1><span style="font-size:18px">总结：</span></h1>
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; 当我们发现，有一个事物貌&#20284;和以前接触的事物很形&#20284;，怎么看怎么像一个东西，这时，我们的要做的就是暂时将他们归为一类，减少我们的知识结点，而随着我们学习的深入，我们发现他貌&#20284;有些不同，我们才恍然大悟，他们是那么不一样，这个时候才知道，发明两种东西是为了解决两个问题！就像Attribute和property在uml阶段我们就学过，那时我以为是一个东西……</span></p>
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; 这个例子既是一个技术的储备也告诉我自己，不要妄想一个东西一开始就弄的明明白白，知识是学习和积累出来的，不仅仅是学出来的！</span></p>
<p><br>
</p>
   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/xvshu/article/details/38407273'>原文链接</a>