<div class="articleLocationOnion"><a href='../../index.html'>首页: </a> &gt; <a href='../index_s.html'>未分类</a> &gt; DIYNETORM框架——整体分析</div><div style="color:blue" align=center>DIYNETORM框架——整体分析</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">

<h1>一、故事</h1>
<div><br>
</div>
<p style="margin-left:0.375in; margin-top:7pt; margin-bottom:7pt; font-size:10.5pt">
<span lang="zh-CN" style="font-family:微软雅黑"><span style="white-space:pre"></span>&nbsp; &nbsp; &nbsp; 近些年一直开发</span><span lang="en-US" style="font-family:Calibri">MIS</span><span lang="zh-CN" style="font-family:微软雅黑">系统，用过</span><span lang="en-US" style="font-family:Calibri">PB</span><span lang="zh-CN" style="font-family:微软雅黑">，</span><span lang="en-US" style="font-family:Calibri">VB</span><span lang="zh-CN" style="font-family:微软雅黑">，</span><span lang="en-US" style="font-family:Calibri">C</span><span lang="en-US" style="font-family:微软雅黑">#</span><span lang="zh-CN" style="font-family:微软雅黑">&nbsp;&nbsp;，现在学了半年的</span><span lang="en-US" style="font-family:微软雅黑">java</span><span lang="zh-CN" style="font-family:微软雅黑">，早先听人说，</span><span lang="en-US" style="font-family:微软雅黑">.NET</span><span lang="zh-CN" style="font-family:微软雅黑">和</span><span lang="en-US" style="font-family:微软雅黑">
 java</span><span lang="zh-CN" style="font-family:微软雅黑">一直就是互相借鉴，一起升级，都是为了让程序开发趋于简单，高校，而这不可避免就肯定用到框架，对</span><span lang="en-US" style="font-family:微软雅黑">java</span><span lang="zh-CN" style="font-family:微软雅黑">中很多框架的实现原理，我也比较感兴趣，在本系列的博客正，咱们将一起实现一个简单的</span><span lang="en-US" style="font-family:微软雅黑">.NET</span><span lang="zh-CN" style="font-family:微软雅黑">版</span><span lang="en-US" style="font-family:微软雅黑">
 ORM</span><span lang="zh-CN" style="font-family:微软雅黑">框架。</span></p>
<p style="margin-left:0.375in; margin-top:7pt; margin-bottom:7pt; font-size:10.5pt">
<span lang="zh-CN" style="font-family:微软雅黑"><span style="white-space:pre"></span>&nbsp; &nbsp; &nbsp; 有人会有疑问，网上有很多成熟的</span><span lang="en-US" style="font-family:Calibri">ORM</span><span lang="zh-CN" style="font-family:微软雅黑">框架，为什么不直接用，偏偏要自己做一个呢？</span></p>
<p style="margin-left:0.375in; margin-top:7pt; margin-bottom:7pt; font-family:微软雅黑; font-size:10.5pt">
<span style="white-space:pre"></span>&nbsp; &nbsp; &nbsp; 对于这个答案，是仁者见仁的问题，就好&#20284;建造大厦，如果他停留在会照着图纸建房子，他肯定是个工人，而如果他能了解图纸上的原理，那么他必然是一个管理者，当他了解原理且能自己画出一份图纸的时候，他就是设计师！</p>
<p style="margin-left:0.375in; margin-top:7pt; margin-bottom:7pt; font-family:微软雅黑; font-size:10.5pt">
&nbsp;</p>
<h1>二，技术了解</h1>
<p style="margin-top:7pt; margin-bottom:7pt; font-family:Calibri; font-size:10.5pt">
&nbsp;</p>
<h2><span lang="zh-CN" style="font-family:Calibri">1</span><span lang="zh-CN" style="font-family:微软雅黑">．什么是</span><span lang="en-US" style="font-family:Calibri">ORM?</span></h2>
<p style="margin:0in; margin-left:.375in; font-family:Calibri; font-size:10.5pt">
&nbsp;</p>
<p style="margin:0in 0in 0in 0.375in; font-family:微软雅黑; font-size:10.5pt"><span lang="zh-CN"><span style="white-space:pre"></span>&nbsp; &nbsp; &nbsp; ORM，即</span><span lang="en-US">Object-RelationalMapping（对象关系映射），它的作用是在关系型数据库和业务实体对象之间作一个映射，这样，我们在具体的操作业务对象的时候，就不需要再去和复杂的SQL语句打交道，只需简单的操作对象的属性和方法。</span></p>
<p style="margin-left:0.375in; margin-top:7pt; margin-bottom:7pt; font-family:微软雅黑; font-size:10.5pt">
&nbsp;</p>
<h2><span lang="en-US" style="font-family:Calibri">2.ORM </span><span lang="zh-CN" style="font-family:微软雅黑">优缺点</span></h2>
<p style="margin-left:.375in; margin-top:7pt; margin-bottom:7pt; font-size:14.0pt; color:#2E75B5">
<span lang="zh-CN" style="font-family:微软雅黑"><br>
</span></p>
<p style="margin-left:.375in; margin-top:7pt; margin-bottom:7pt; font-size:14.0pt; color:#2E75B5">
<span lang="zh-CN" style="font-family:微软雅黑"><img src="26251385616949" alt=""><br>
</span></p>
<p style="margin-left:0.375in; margin-top:7pt; margin-bottom:7pt; font-size:14pt">
<span lang="zh-CN" style="font-family:微软雅黑"></span></p>
<p style="margin-left:0.375in; margin-top:7pt; margin-bottom:7pt; font-family:微软雅黑; font-size:10.5pt">
<br>
</p>
<p style="margin-left:0.375in; margin-top:7pt; margin-bottom:7pt; font-family:微软雅黑; font-size:10.5pt">
展开说说</p>
<p style="margin-left:0.375in; margin-top:7pt; margin-bottom:7pt; font-family:微软雅黑; font-size:10.5pt">
优点：</p>
<p style="margin:0in 0in 0in 0.75in; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑">（</span><span lang="en-US" style="font-family:Calibri">1</span><span lang="zh-CN" style="font-family:微软雅黑">），隐藏了数据访问细节</span><span lang="en-US" style="font-family:微软雅黑">。</span></p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in 0in 0in 0.75in; font-family:微软雅黑; font-size:10.5pt"><span lang="zh-CN">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;“封闭”的通用数据库交互，</span><span lang="en-US">ORM的核心。他使得我们的通用数据库交互变得简单易行，并且完全不用考虑该死的SQL语句。快速开发，由此而来。</span></p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in 0in 0in 0.75in; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑">（</span><span lang="en-US" style="font-family:Calibri">2</span><span lang="zh-CN" style="font-family:微软雅黑">），</span><span lang="en-US" style="font-family:微软雅黑">ORM使我们构造固化数据结构变得简单易行。</span></p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in 0in 0in 0.75in; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;回想我们没有</span><span lang="en-US" style="font-family:Calibri">ORM</span><span lang="zh-CN" style="font-family:微软雅黑">的年代，我们要为每个表编写形形色色的</span><span lang="en-US" style="font-family:Calibri">sql</span><span lang="zh-CN" style="font-family:微软雅黑">语句，我们拿到的数据内容，要自己转换为对象，我们为了某个字段&#20540;写错的</span><span lang="en-US" style="font-family:Calibri">bug</span><span lang="zh-CN" style="font-family:微软雅黑">彻夜不眠，</span><span lang="en-US" style="font-family:微软雅黑">而现在，基本上所有的ORM框架都提供了通过对象模型构造关系数据库结构的功能。</span><span lang="zh-CN" style="font-family:微软雅黑">而</span><span lang="en-US" style="font-family:微软雅黑">这，</span><span lang="zh-CN" style="font-family:微软雅黑">“太好了！！！”</span><span lang="en-US" style="font-family:微软雅黑">。</span></p>
<p style="margin-left:0.375in; margin-top:7pt; margin-bottom:7pt; font-family:微软雅黑; font-size:10.5pt">
缺点：</p>
<p style="margin:0in 0in 0in 0.75in; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑">（</span><span lang="en-US" style="font-family:Calibri">1</span><span lang="zh-CN" style="font-family:微软雅黑">）牺牲性能：</span></p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in 0in 0in 0.75in; font-family:微软雅黑; font-size:10.5pt"><span lang="zh-CN">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;无可避免的，自动化意味着映射和关联管理，代价是牺牲性能（早期，这是所有不喜欢</span><span lang="en-US">ORM人的共同点）。现在的各种ORM框架都在尝试使用各种方法来减轻这块（LazyLoad，Cache），效果还是很显著的。</span></p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in 0in 0in 0.75in; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑">（</span><span lang="en-US" style="font-family:Calibri">2</span><span lang="zh-CN" style="font-family:微软雅黑">）查询语言：</span></p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in 0in 0in 0.75in; font-family:微软雅黑; font-size:10.5pt"><span lang="zh-CN">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;面向对象的查询语言</span><span lang="en-US">(X-QL)作为一种数据库与对象之间的过渡,虽然隐藏了数据层面的业务抽象,但并不能完全的屏蔽掉数据库层的设计,并且无疑将增加学习成本.</span></p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in 0in 0in 0.75in; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑">（</span><span lang="en-US" style="font-family:Calibri">3</span><span lang="zh-CN" style="font-family:微软雅黑">）复杂查询：</span></p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in; margin-left:.75in; font-family:Calibri; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in 0in 0in 0.75in; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于复杂查询，</span><span lang="en-US" style="font-family:微软雅黑">ORM仍然力不从心。虽然可以实现，但是不&#20540;的。视图可以解决大部分calculatedcolumn，case ，group，having,order by, exists，但是查询条件(a
 and b and not c and (d ord))</span><span lang="zh-CN" style="font-family:微软雅黑">我们有些也要慎重考虑和重新编写</span><span lang="en-US" style="font-family:Calibri">sql</span><span lang="zh-CN" style="font-family:微软雅黑">语句！</span></p>
<p style="margin:0in 0in 0in 0.75in; font-family:微软雅黑; font-size:10.5pt">&nbsp;</p>
<p style="margin:0in 0in 0in 0.375in; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑">总结：世上任何事情是完美的</span><span lang="en-US" style="font-family:微软雅黑">，任何优势的背后都隐藏着</span><span lang="zh-CN" style="font-family:微软雅黑">缺点</span><span lang="en-US" style="font-family:微软雅黑">，这是</span><span lang="zh-CN" style="font-family:微软雅黑">必然的</span><span lang="en-US" style="font-family:微软雅黑">。问题在于，我们</span><span lang="zh-CN" style="font-family:微软雅黑">是如何平衡他们的额</span><span lang="en-US" style="font-family:微软雅黑">。</span><span lang="zh-CN" style="font-family:微软雅黑">在简答业务的场合下，简单三成可能就是最佳选择，而在某些业务逻辑复杂，开发团队庞大的项目中，</span><span lang="en-US" style="font-family:Calibri">ORM</span><span lang="zh-CN" style="font-family:微软雅黑">却又是个不得不考虑的问题，具体怎么办？就看你怎么衡量，没人说用了</span><span lang="en-US" style="font-family:Calibri">ORM</span><span lang="zh-CN" style="font-family:微软雅黑">就不让底层人员写</span><span lang="en-US" style="font-family:Calibri">sql</span><span lang="zh-CN" style="font-family:微软雅黑">语句了…………</span></p>
<p style="margin:0in 0in 0in 0.375in; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑"></span></p>
<h1>三，模块设计构想</h1>
<img src="33310826069420" alt=""><br>
<p>
<p style="margin:0in 0in 0in 0.375in; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑"><br>
</span></p>
<h1>四、本篇总结</h1>
<p style="margin-top:7pt; margin-bottom:7pt; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang="en-US" style="font-family:微软雅黑"></span><span lang="zh-CN" style="font-family:微软雅黑">本次简单讲述了</span><span lang="en-US" style="font-family:微软雅黑">ORM</span><span lang="zh-CN" style="font-family:微软雅黑">实现的基本思路分析及</span><span lang="en-US" style="font-family:微软雅黑">ORM</span><span lang="zh-CN" style="font-family:微软雅黑">框架使用的优缺点及在项目中如何合理的分析与应用。我们用ORM框架是来解决问题，但是，不是什么问题都是一种框架可以解决的，数据库的封装，</span><span lang="en-US" style="font-family:Calibri">ORM</span><span lang="zh-CN" style="font-family:微软雅黑">只是做了其中的工作，也不要觉得这个东西是多么的高深，随着我们代码的不断推进，我们设计的不断完善，其实我们可以发现，所有的代码都是基本技术的组合，只是我们对于他的组合形式不熟悉，相信自己，框架我们也是可以写出来的！</span></p>
<p style="margin-top:11pt; margin-bottom:1pt; font-family:微软雅黑; font-size:12pt"><span style="font-weight:bold">附件（系列博客链接）：</span></p>
<p style="margin-top:7pt; margin-bottom:7pt; font-size:10.5pt"><span lang="zh-CN" style="font-family:微软雅黑">&nbsp;&nbsp;</span><span lang="en-US" style="font-family:微软雅黑"></span><span lang="zh-CN" style="font-family:微软雅黑">&nbsp;</span><span lang="en-US" style="font-family:微软雅黑"></span><span lang="zh-CN" style="font-family:微软雅黑">&nbsp;</span><span lang="en-US" style="font-family:微软雅黑"></span><a target="_blank" href="http://blog.csdn.net/xvshu/article/details/38316427"><span lang="zh-CN" style="font-family:微软雅黑">&nbsp;</span><span lang="en-US" style="font-family:Calibri">1</span><span lang="zh-CN" style="font-family:微软雅黑">，</span><span lang="en-US" style="font-family:Calibri">DIY.NETORM</span><span lang="zh-CN" style="font-family:SimSun">框架——整体分析</span></a></p>
<br>
   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/xvshu/article/details/38316427'>原文链接</a>