<div class="articleLocationOnion"><a href='../../index.html'>首页: </a> &gt; <a href='../index_s.html'>未分类</a> &gt; Android开发学习（9）记忆功能计算器</div><div style="color:blue" align=center>Android开发学习（9）记忆功能计算器</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">
        <div class="markdown_views"><p>承接上篇博客，每到一个阶段，我们就用一个项目总结我们学习到的内容，今天我们就一起继续完成一个拥有记忆功能的简单计算器，首先我们先看下计算器布局：</p>



<h1 id="布局">布局</h1>

<p>计算主页面：</p>

<p><img src="46074689820341" alt="calc_main" title=""></p>

<p>历史记录查询页面：</p>

<p><img src="19290576897181" alt="calc_history" title=""></p>



<h2 id="自定义标题">自定义标题：</h2>

<p>head.xml</p>



<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">RelativeLayout</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>
                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/layout_titlebar"</span>
                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"52dp"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"#ed4255"</span> &gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>            <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/button_backward"</span>
            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"60dp"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"#ed4255"</span>
            <span class="hljs-attribute">android:drawablePadding</span>=<span class="hljs-value">"6dp"</span>
            <span class="hljs-attribute">android:ellipsize</span>=<span class="hljs-value">"end"</span>
            <span class="hljs-attribute">android:onClick</span>=<span class="hljs-value">"back"</span>
            <span class="hljs-attribute">android:gravity</span>=<span class="hljs-value">"center"</span>
            <span class="hljs-attribute">android:paddingLeft</span>=<span class="hljs-value">"5dp"</span>
            <span class="hljs-attribute">android:singleLine</span>=<span class="hljs-value">"true"</span>
            <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"&amp;lt; 返回"</span>
            <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"#ffffffff"</span>
            <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"20dp"</span>
            <span class="hljs-attribute">android:visibility</span>=<span class="hljs-value">"visible"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">TextView
</span>            <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/text_title"</span>
            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:ellipsize</span>=<span class="hljs-value">"marquee"</span>
            <span class="hljs-attribute">android:gravity</span>=<span class="hljs-value">"center_horizontal|center"</span>
            <span class="hljs-attribute">android:singleLine</span>=<span class="hljs-value">"true"</span>
            <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"XS-APP"</span>
            <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"#ffffffff"</span>
            <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"20dp"</span> /&gt;</span>



    <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>            <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/button_forward"</span>
            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"60dp"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:layout_alignParentRight</span>=<span class="hljs-value">"true"</span>
            <span class="hljs-attribute">android:drawablePadding</span>=<span class="hljs-value">"6dp"</span>
            <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"#ed4255"</span>
            <span class="hljs-attribute">android:ellipsize</span>=<span class="hljs-value">"end"</span>
            <span class="hljs-attribute">android:gravity</span>=<span class="hljs-value">"center"</span>
            <span class="hljs-attribute">android:paddingLeft</span>=<span class="hljs-value">"5dp"</span>
            <span class="hljs-attribute">android:singleLine</span>=<span class="hljs-value">"true"</span>
            <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"···"</span>
            <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"#ffffffff"</span>
            <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"30dp"</span>
            <span class="hljs-attribute">android:visibility</span>=<span class="hljs-value">"invisible"</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">RelativeLayout</span>&gt;</span></code></pre>



<h2 id="计算器主页面">计算器主页面：</h2>

<p>calc.xml</p>



<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>
              <span class="hljs-attribute">android:orientation</span>=<span class="hljs-value">"vertical"</span>
              <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
              <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"#fafcfa"</span>
              <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>&gt;</span>


    <span class="hljs-tag">&lt;<span class="hljs-title">include</span> <span class="hljs-attribute">layout</span>=<span class="hljs-value">"@layout/head"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">TextView
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/print_show"</span>
                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"0dp"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"@dimen/view_size_150"</span>
                <span class="hljs-attribute">android:layout_weight</span>=<span class="hljs-value">"1"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/background_head"</span>
                <span class="hljs-attribute">android:gravity</span>=<span class="hljs-value">"left"</span>
                <span class="hljs-attribute">android:padding</span>=<span class="hljs-value">"@dimen/view_space_10"</span>
                <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"@dimen/font_size_20"</span> /&gt;</span>



    <span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span>


    <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"0dp"</span>
            <span class="hljs-attribute">android:layout_weight</span>=<span class="hljs-value">"1"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_C"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"C"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_clean"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"清除"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_hisrory"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"历史"</span> /&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span>


    <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
            <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_7"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"7"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_8"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"8"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_9"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"9"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_div"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"÷"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
            <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_4"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"4"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_5"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"5"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_6"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"6"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_mul"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"x"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
            <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_1"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"1"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_2"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"2"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_3"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"3"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_sub"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"-"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
            <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_point"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"."</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_0"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"0"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_print"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"="</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"@dimen/line_size_.5"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/key_add"</span>
                <span class="hljs-attribute">style</span>=<span class="hljs-value">"@style/keyStyle"</span>
                <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"+"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span></code></pre>



<h2 id="计算器历史记录页面">计算器历史记录页面：</h2>

<p>calc_history.xml</p>



<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>
              <span class="hljs-attribute">android:orientation</span>=<span class="hljs-value">"vertical"</span>
              <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
              <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">include</span> <span class="hljs-attribute">layout</span>=<span class="hljs-value">"@layout/head"</span> /&gt;</span>

    <span class="hljs-comment">&lt;!--list父窗口 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ListView</span> <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
              <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
              <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/LV_Calc"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ListView</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span></code></pre>

<p>calc_history_item.xml</p>



<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>
              <span class="hljs-attribute">android:orientation</span>=<span class="hljs-value">"vertical"</span>
              <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
              <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">TextView
</span>            <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"TextView01"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"fill_parent"</span>
            <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/item_calc"</span>
            <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"20dip"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">TextView</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span></code></pre>



<h1 id="activity">Activity</h1>



<h2 id="计算器">计算器</h2>



<pre class="prettyprint"><code class=" hljs avrasm">package <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.xvshu</span><span class="hljs-preprocessor">.android</span><span class="hljs-comment">;</span>

import android<span class="hljs-preprocessor">.app</span><span class="hljs-preprocessor">.Activity</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.content</span><span class="hljs-preprocessor">.ContentValues</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.content</span><span class="hljs-preprocessor">.Intent</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.os</span><span class="hljs-preprocessor">.Bundle</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.View</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.widget</span><span class="hljs-preprocessor">.Button</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.widget</span><span class="hljs-preprocessor">.TextView</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.widget</span><span class="hljs-preprocessor">.Toast</span><span class="hljs-comment">;</span>
import <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.xvshu</span><span class="hljs-preprocessor">.android</span><span class="hljs-preprocessor">.db</span><span class="hljs-preprocessor">.CalcHisrory</span><span class="hljs-comment">;</span>
import <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.xvshu</span><span class="hljs-preprocessor">.android</span><span class="hljs-preprocessor">.db</span><span class="hljs-preprocessor">.SqliteManage</span><span class="hljs-comment">;</span>
import <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.xvshu</span><span class="hljs-preprocessor">.android</span><span class="hljs-preprocessor">.service</span><span class="hljs-preprocessor">.HelloService</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.Stack</span><span class="hljs-comment">;</span>


<span class="hljs-comment">/**
 * Created by xvshu on 2017/7/26.
 */</span>
public class CalcActivity extends Activity {

    private TextView printTv = null<span class="hljs-comment">;</span>
    //声明两个参数。接收tvResult前后的值
    double num1=<span class="hljs-number">0</span>,num2=<span class="hljs-number">0</span><span class="hljs-comment">;</span>

    int op=<span class="hljs-number">0</span><span class="hljs-comment">;//判断操作数，</span>
    boolean isClickEqu=false<span class="hljs-comment">;//判断是否按了“=”按钮</span>


    <span class="hljs-comment">/**
     * Called when the activity is first created.
     */</span>
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super<span class="hljs-preprocessor">.onCreate</span>(savedInstanceState)<span class="hljs-comment">;</span>
        setContentView(R<span class="hljs-preprocessor">.layout</span><span class="hljs-preprocessor">.calc</span>)<span class="hljs-comment">;</span>
        printTv=(TextView) findViewById(R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.print</span>_show)<span class="hljs-comment">;</span>
    }

    public void keyClick(View v) {
        String sbcalc=printTv<span class="hljs-preprocessor">.getText</span>()<span class="hljs-preprocessor">.toString</span>()<span class="hljs-comment">;</span>
        System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(sbcalc)<span class="hljs-comment">;</span>
        if (v == null) return<span class="hljs-comment">;</span>
        if (printTv<span class="hljs-preprocessor">.getText</span>()<span class="hljs-preprocessor">.toString</span>()<span class="hljs-preprocessor">.indexOf</span>(<span class="hljs-string">"="</span>)&gt;=<span class="hljs-number">0</span>) {
            System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"hava = "</span>)<span class="hljs-comment">;</span>
            sbcalc=<span class="hljs-string">""</span><span class="hljs-comment">;</span>
        }
        switch (v<span class="hljs-preprocessor">.getId</span>()) {
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_clean:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_clean"</span>)<span class="hljs-comment">;</span>
                sbcalc=<span class="hljs-string">""</span><span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_C:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_C"</span>)<span class="hljs-comment">;</span>
                try {
                    sbcalc=sbcalc<span class="hljs-preprocessor">.substring</span>(<span class="hljs-number">0</span>, sbcalc<span class="hljs-preprocessor">.length</span>()-<span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
                } catch (Exception e) {
                    sbcalc=<span class="hljs-string">""</span><span class="hljs-comment">;</span>
                }
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_hisrory:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_hisrory"</span>)<span class="hljs-comment">;</span>
                showCalcHistory()<span class="hljs-comment">;</span>
                return<span class="hljs-comment">;</span>
            default:
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
        }

        switch (v<span class="hljs-preprocessor">.getId</span>()) {
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_0:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_0"</span>)<span class="hljs-comment">;</span>
                if (sbcalc<span class="hljs-preprocessor">.toString</span>()<span class="hljs-preprocessor">.length</span>() != <span class="hljs-number">0</span>) {
                    sbcalc+=<span class="hljs-string">"0"</span><span class="hljs-comment">;</span>
                }
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_1:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_1"</span>)<span class="hljs-comment">;</span>
                sbcalc+=<span class="hljs-string">"1"</span><span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_2:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_2"</span>)<span class="hljs-comment">;</span>
                sbcalc+=<span class="hljs-string">"2"</span><span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_3:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_3"</span>)<span class="hljs-comment">;</span>
                sbcalc+=<span class="hljs-string">"3"</span><span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_4:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_4"</span>)<span class="hljs-comment">;</span>
                sbcalc+=<span class="hljs-string">"4"</span><span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_5:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_5"</span>)<span class="hljs-comment">;</span>
                sbcalc+=<span class="hljs-string">"5"</span><span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_6:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_6"</span>)<span class="hljs-comment">;</span>
                sbcalc+=<span class="hljs-string">"6"</span><span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_7:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_7"</span>)<span class="hljs-comment">;</span>
                sbcalc+=<span class="hljs-string">"7"</span><span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_8:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_8"</span>)<span class="hljs-comment">;</span>
                sbcalc+=<span class="hljs-string">"8"</span><span class="hljs-comment">;;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_9:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"R.id.key_9"</span>)<span class="hljs-comment">;</span>
                sbcalc+=<span class="hljs-string">"9"</span><span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_point:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">" . "</span>)<span class="hljs-comment">;</span>
                if (sbcalc<span class="hljs-preprocessor">.length</span>() != <span class="hljs-number">0</span>)
                    sbcalc+=<span class="hljs-string">"."</span><span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>

            //加减乘除
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_add:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">" + "</span>)<span class="hljs-comment">;</span>
                sbcalc+=<span class="hljs-string">" + "</span><span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>

            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_sub:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">" - "</span>)<span class="hljs-comment">;</span>
                sbcalc+=(<span class="hljs-string">" - "</span>)<span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_mul:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">" x "</span>)<span class="hljs-comment">;</span>
                sbcalc+=(<span class="hljs-string">" x "</span>)<span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_div:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">" ÷ "</span>)<span class="hljs-comment">;</span>
                sbcalc+=(<span class="hljs-string">" ÷ "</span>)<span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            case R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.key</span>_print:
                System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">" = "</span>)<span class="hljs-comment">;</span>
                sbcalc=(sbcalc+<span class="hljs-string">"="</span>+compute(sbcalc))<span class="hljs-comment">;</span>
                addHistroy(sbcalc)<span class="hljs-comment">;</span>
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
            default:
                <span class="hljs-keyword">break</span><span class="hljs-comment">;</span>
        }
        printTv<span class="hljs-preprocessor">.setText</span>(sbcalc)<span class="hljs-comment">;</span>
    }

    private String compute(String input)//即<span class="hljs-number">1237</span> 的 样例
    {
        String str[]<span class="hljs-comment">;</span>
        str = input<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">" "</span>)<span class="hljs-comment">;</span>
        Stack&lt;Double&gt; s = new Stack&lt;Double&gt;()<span class="hljs-comment">;</span>
        double m = Double<span class="hljs-preprocessor">.parseDouble</span>(str[<span class="hljs-number">0</span>])<span class="hljs-comment">;</span>
        s<span class="hljs-preprocessor">.push</span>(m)<span class="hljs-comment">;</span>
        for(int i=<span class="hljs-number">1</span><span class="hljs-comment">;i&lt;str.length;i++)</span>
        {
            if(i%<span class="hljs-number">2</span>==<span class="hljs-number">1</span>)
            {
                if(str[i]<span class="hljs-preprocessor">.compareTo</span>(<span class="hljs-string">"+"</span>)==<span class="hljs-number">0</span>)
                {
                    double help = Double<span class="hljs-preprocessor">.parseDouble</span>(str[i+<span class="hljs-number">1</span>])<span class="hljs-comment">;</span>
                    s<span class="hljs-preprocessor">.push</span>(help)<span class="hljs-comment">;</span>
                }

                if(str[i]<span class="hljs-preprocessor">.compareTo</span>(<span class="hljs-string">"-"</span>)==<span class="hljs-number">0</span>)
                {
                    double help = Double<span class="hljs-preprocessor">.parseDouble</span>(str[i+<span class="hljs-number">1</span>])<span class="hljs-comment">;</span>
                    s<span class="hljs-preprocessor">.push</span>(-help)<span class="hljs-comment">;</span>
                }

                if(str[i]<span class="hljs-preprocessor">.compareTo</span>(<span class="hljs-string">"x"</span>)==<span class="hljs-number">0</span>)
                {
                    double help = Double<span class="hljs-preprocessor">.parseDouble</span>(str[i+<span class="hljs-number">1</span>])<span class="hljs-comment">;</span>
                    double ans = s<span class="hljs-preprocessor">.peek</span>()<span class="hljs-comment">;//取出栈顶元素</span>
                    s<span class="hljs-preprocessor">.pop</span>()<span class="hljs-comment">;//消栈</span>
                    ans*=help<span class="hljs-comment">;</span>
                    s<span class="hljs-preprocessor">.push</span>(ans)<span class="hljs-comment">;</span>
                }

                if(str[i]<span class="hljs-preprocessor">.compareTo</span>(<span class="hljs-string">"÷"</span>)==<span class="hljs-number">0</span>)
                {
                    double help = Double<span class="hljs-preprocessor">.parseDouble</span>(str[i+<span class="hljs-number">1</span>])<span class="hljs-comment">;</span>
                    double ans = s<span class="hljs-preprocessor">.peek</span>()<span class="hljs-comment">;</span>
                    s<span class="hljs-preprocessor">.pop</span>()<span class="hljs-comment">;</span>
                    ans/=help<span class="hljs-comment">;</span>
                    s<span class="hljs-preprocessor">.push</span>(ans)<span class="hljs-comment">;</span>
                }
            }
        }
        double ans = <span class="hljs-number">0</span>d<span class="hljs-comment">;</span>
        while(!s<span class="hljs-preprocessor">.isEmpty</span>())
        {
            ans+=s<span class="hljs-preprocessor">.peek</span>()<span class="hljs-comment">;</span>
            s<span class="hljs-preprocessor">.pop</span>()<span class="hljs-comment">;</span>
        }
        String result = String<span class="hljs-preprocessor">.valueOf</span>(ans)<span class="hljs-comment">;</span>
        return result<span class="hljs-comment">;</span>
    }

    private void addHistroy(String calcValue){
        ContentValues valuesIn = new ContentValues()<span class="hljs-comment">;</span>
        valuesIn<span class="hljs-preprocessor">.put</span>(CalcHisrory<span class="hljs-preprocessor">.calcValueName</span>, calcValue)<span class="hljs-comment">;</span>
        SqliteManage<span class="hljs-preprocessor">.getInstance</span>(this)<span class="hljs-preprocessor">.insertItem</span>(CalcHisrory<span class="hljs-preprocessor">.TableName</span>, valuesIn)<span class="hljs-comment">;</span>
    }

    public void showCalcHistory(){
        Intent intent_calc = new Intent(this, CalcHistoryActivity<span class="hljs-preprocessor">.class</span>)<span class="hljs-comment">;</span>
        startActivity(intent_calc)<span class="hljs-comment">;</span>
    }
    public void back(View view){
        this<span class="hljs-preprocessor">.finish</span>()<span class="hljs-comment">;</span>
    }

}
</code></pre>



<h2 id="历史记录">历史记录</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.xvshu.android;

<span class="hljs-keyword">import</span> android.app.Activity;
<span class="hljs-keyword">import</span> android.content.ContentValues;
<span class="hljs-keyword">import</span> android.os.Bundle;
<span class="hljs-keyword">import</span> android.view.View;
<span class="hljs-keyword">import</span> android.widget.ListView;
<span class="hljs-keyword">import</span> android.widget.SimpleAdapter;
<span class="hljs-keyword">import</span> android.widget.TextView;
<span class="hljs-keyword">import</span> com.xvshu.android.db.CalcHisrory;
<span class="hljs-keyword">import</span> com.xvshu.android.db.SqliteManage;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Stack;


<span class="hljs-javadoc">/**
 * Created by xvshu on 2017/7/26.
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalcHistoryActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> {</span>

    <span class="hljs-keyword">private</span> ListView lvCalc;
    <span class="hljs-javadoc">/**
     * Called when the activity is first created.
     */</span>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.calc_history);
        lvCalc=(ListView) findViewById(R.id.LV_Calc);
        showCalchistory();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showCalchistory</span>(){
        List&lt;HashMap&lt;String,Object&gt;&gt; data=<span class="hljs-keyword">new</span> ArrayList&lt;HashMap&lt;String,Object&gt;&gt;();
        SqliteManage.QueryResult result = SqliteManage.getInstance(<span class="hljs-keyword">this</span>).query(CalcHisrory.TableName, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);
        List&lt;String&gt; historys =<span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();
        <span class="hljs-keyword">while</span> (result.cursor.moveToNext()) {
            historys.add(result.cursor.getString(result.cursor.getColumnIndex(CalcHisrory.calcValueName)));
        }
        <span class="hljs-keyword">if</span>(historys!=<span class="hljs-keyword">null</span> &amp;&amp; historys.size()&gt;<span class="hljs-number">0</span>){
            <span class="hljs-keyword">for</span>(String one : historys){
                HashMap&lt;String,Object&gt; item=<span class="hljs-keyword">new</span> HashMap&lt;String, Object&gt;();
                item.put(<span class="hljs-string">"item_calc"</span>,one);
                data.add(item);
            }
        }
        SimpleAdapter adapter=<span class="hljs-keyword">new</span> SimpleAdapter(<span class="hljs-keyword">this</span>,data,R.layout.calc_history_item,
                <span class="hljs-keyword">new</span> String[]{<span class="hljs-string">"item_calc"</span>},<span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[]{R.id.item_calc});

        lvCalc.setAdapter(adapter);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">back</span>(View view){
        <span class="hljs-keyword">this</span>.finish();
    }

}
</code></pre>



<h1 id="sqlite">Sqlite</h1>

<p>SqliteManage.java</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.xvshu.android.db;

<span class="hljs-keyword">import</span> android.content.ContentValues;
<span class="hljs-keyword">import</span> android.content.Context;
<span class="hljs-keyword">import</span> android.database.Cursor;
<span class="hljs-keyword">import</span> android.database.sqlite.SQLiteDatabase;
<span class="hljs-keyword">import</span> android.os.Environment;

<span class="hljs-keyword">import</span> java.io.File;

<span class="hljs-javadoc">/**
 * Created by 22762 on 2016/1/7.
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqliteManage</span> {</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqliteManage mInstance;
    <span class="hljs-keyword">private</span> File mFile;

    <span class="hljs-keyword">private</span> <span class="hljs-title">SqliteManage</span>(Context context) {
        String path;
        <span class="hljs-keyword">if</span> (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {
            path = Environment.getExternalStorageDirectory().getAbsolutePath()
                    + File.separator + <span class="hljs-string">"AndroidXS"</span>;
        } <span class="hljs-keyword">else</span> {
            path = context.getFilesDir() + File.separator + <span class="hljs-string">"data"</span>;
        }
        <span class="hljs-keyword">boolean</span> success = <span class="hljs-keyword">new</span> File(path).mkdirs();
        mFile = <span class="hljs-keyword">new</span> File(path, <span class="hljs-string">"data.db"</span>);

        SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(mFile, <span class="hljs-keyword">null</span>);
        db.execSQL(<span class="hljs-string">"create table if not exists "</span>+CalcHisrory.TableName+<span class="hljs-string">"(_id INTEGER PRIMARY KEY AUTOINCREMENT,"</span>+CalcHisrory.calcValueName+<span class="hljs-string">" varchar(500))"</span>);
        db.close();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqliteManage <span class="hljs-title">getInstance</span>(Context context) {
        <span class="hljs-keyword">if</span> (mInstance == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">synchronized</span> (SqliteManage.class) {
                <span class="hljs-keyword">if</span> (mInstance == <span class="hljs-keyword">null</span>) {
                    mInstance = <span class="hljs-keyword">new</span> SqliteManage(context);
                }
            }
        }
        <span class="hljs-keyword">return</span> mInstance;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isExitInTable</span>(String table, String where, String[] args) {
        <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">false</span>;
        SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(mFile, <span class="hljs-keyword">null</span>);
        Cursor cursor = db.query(table, <span class="hljs-keyword">null</span>, where, args, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);
        <span class="hljs-keyword">if</span> (cursor != <span class="hljs-keyword">null</span> &amp;&amp; cursor.getCount() &gt; <span class="hljs-number">0</span>) {
            flag = <span class="hljs-keyword">true</span>;
        }
        cursor.close();
        db.close();
        <span class="hljs-keyword">return</span> flag;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">insertItem</span>(String table, ContentValues cv) {
        SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(mFile, <span class="hljs-keyword">null</span>);
        <span class="hljs-keyword">if</span> (db.insert(table, <span class="hljs-keyword">null</span>, cv) == <span class="hljs-number">1</span>) {
            db.close();
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        }
        db.close();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delteItem</span>(String table, String where, String[] args) {
        SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(mFile, <span class="hljs-keyword">null</span>);
        <span class="hljs-keyword">int</span> i = db.delete(table, where, args);
        db.close();
        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">updateItem</span>(String table, String where, String[] args, ContentValues values) {
        SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(mFile, <span class="hljs-keyword">null</span>);
        <span class="hljs-keyword">int</span> i = db.update(table, values, where, args);
        db.close();
        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-keyword">public</span> QueryResult <span class="hljs-title">query</span>(String table, String where, String[] args) {
        QueryResult queryResult = <span class="hljs-keyword">new</span> QueryResult();
        queryResult.db = SQLiteDatabase.openOrCreateDatabase(mFile, <span class="hljs-keyword">null</span>);
        queryResult.cursor = queryResult.db.query(table, <span class="hljs-keyword">null</span>, where, args, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);
        <span class="hljs-keyword">return</span> queryResult;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QueryResult</span> {</span>
        <span class="hljs-keyword">public</span> SQLiteDatabase db;
        <span class="hljs-keyword">public</span> Cursor cursor;
    }
}
</code></pre>

<p>CalcHisrory.java</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.xvshu.android.db;

<span class="hljs-javadoc">/**
 * Created by xvshu on 2017/8/10.
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalcHisrory</span> {</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> String TableName=<span class="hljs-string">"calc_history"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> String calcValueName=<span class="hljs-string">"calc_value"</span>;
}
</code></pre>



<h1 id="总结">总结</h1>

<p>安卓的开发，越来越感觉非常便捷，感到安卓大行其道的原因，开发方便应该是一大助力！我们用一个小的项目打个节点，希望大家跟上节奏，我们继续探索移动开发中的秘密。</p>

<p>源码地址： <br>
    <a href="https://github.com/xvshu/xvshu_android_test">git_xvshu_android_test</a></p></div>
        <script>
            $(function () {
                $('pre.prettyprint code').each(function () {
                    var lines = $(this).text().split('\n').length;
                    var $numbering = $('<ul/>').addClass('pre-numbering').hide();
                    $(this).addClass('has-numbering').parent().append($numbering);
                    for (i = 1; i <= lines; i++) {
                        $numbering.append($('<li/>').text(i));
                    };
                    $numbering.fadeIn(1700);
                });
            });
        </script>
   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/xvshu/article/details/77090536'>原文链接</a>