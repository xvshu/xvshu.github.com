<div style="color:blue" align=center>Junit4单元测试</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">
<p><span style="font-family:KaiTi_GB2312;font-size:18px;">最近公司一直在鼓励写单元测试，故最近自己也整理了些比较常用的单元测试用法，在这里跟大家分享！</span></p><p><span style="font-family:KaiTi_GB2312;"><br></span></p><p><span style="font-size:18px;"><span style="font-family:KaiTi_GB2312;">以下便是我们经常写的一个测试类，那么其中的一些内容我们是否完全都理解呢，下面我来给大家介绍下：</span><br></span></p><p><span style="font-size:18px;"></span></p><pre name="code" class="java">package com.lyancafe.csr.bo;

import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.times;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;

import java.lang.reflect.Field;
import java.util.ArrayList;
import java.util.List;

import junit.framework.Assert;

import org.junit.Before;
import org.junit.Test;
import org.mockito.Mockito;

import com.lyancafe.common.Pagination;
import com.lyancafe.core.dao.CityDao;
import com.lyancafe.core.model.City;
import com.lyancafe.exception.CityExistException;


public class CityBoImplTest {
	private CityBoImpl cityBoImpl;
	private CityDao cityDao;
	
	@Before
	public void setUp() throws Exception {
		cityBoImpl = new CityBoImpl();
		cityDao = mock(CityDao.class);

		setPropertyByReflect(cityBoImpl, &quot;cityDao&quot;, cityDao);
	}
	
	@Test
	public void testCreateCity() {
		City city = createCity();
		when(cityDao.queryCount(Mockito.anyMapOf(String.class, Object.class))).thenReturn(0);
		when(cityDao.createCity(Mockito.any(City.class))).thenReturn(1);
		try {
			cityBoImpl.createCity(city);
		} catch (CityExistException e) {
			Assert.assertTrue(false);
		}
		verify(cityDao, times(1)).queryCount(Mockito.anyMapOf(String.class, Object.class));
		verify(cityDao, times(1)).createCity(Mockito.any(City.class));
	}
	
	@Test
	public void testRenameCitySuccessfully() {
		City city = createCity();
		//when(cityDao.queryCount(Mockito.anyMapOf(String.class, Object.class))).thenReturn(0);
		when(cityDao.update(Mockito.any(City.class))).thenReturn(1);
		
		try {
			cityBoImpl.renameCity(city);
		} catch (CityExistException e) {
			Assert.assertTrue(false);
		}
		
		//verify(cityDao, times(1)).queryCount(Mockito.anyMapOf(String.class, Object.class));
		verify(cityDao, times(1)).update(Mockito.any(City.class));
	}
	
	@Test
	public void testRenameCityToAnUsedName() {
		City city = createCity();
		//when(cityDao.queryCount(Mockito.anyMapOf(String.class, Object.class))).thenReturn(1);
		when(cityDao.update(Mockito.any(City.class))).thenReturn(1);
		try {
			cityBoImpl.renameCity(city);
			// should get exception
			//Assert.assertTrue(false);
		} catch (CityExistException e) {
		}
		//verify(cityDao, times(1)).queryCount(Mockito.anyMapOf(String.class, Object.class));
		verify(cityDao, times(1)).update(Mockito.any(City.class));
	}
	
	@Test
	public void testOpenCity() {
		City city = createCity();
		when(cityDao.openCity(Mockito.any(City.class))).thenReturn(1);
		cityBoImpl.openCity(city);
		verify(cityDao, times(1)).openCity(Mockito.any(City.class));
	}
	
	@Test
	public void testCloseCity() {
		City city = createCity();
		when(cityDao.closeCity(Mockito.any(City.class))).thenReturn(1);
		cityBoImpl.closeCity(city);
		verify(cityDao, times(1)).closeCity(Mockito.any(City.class));
	}
	
	@Test
	public void testFindActiveCity() {
		Pagination&lt;City&gt; pagination = new Pagination&lt;City&gt;();
		pagination.setItemPerPage(1);
		pagination.setCurPage(1);
		
		List&lt;City&gt; cityList = createCityList();
		
		when(cityDao.queryCount(Mockito.anyMapOf(String.class, Object.class))).thenReturn(cityList.size());
		when(cityDao.queryCity(Mockito.anyMapOf(String.class, Object.class))).thenReturn(cityList);
		
		pagination = cityBoImpl.findActiveCityByPage(pagination);
		
		verify(cityDao, times(1)).queryCount(Mockito.anyMapOf(String.class, Object.class));
		verify(cityDao, times(1)).queryCity(Mockito.anyMapOf(String.class, Object.class));
		
		Assert.assertEquals(pagination.getTotalCount(), cityList.size());
		Assert.assertTrue(pagination.hasNext());
	}
	
	@Test
	public void testFindInactiveCity() {
		Pagination&lt;City&gt; pagination = new Pagination&lt;City&gt;();
		pagination.setItemPerPage(1);
		pagination.setCurPage(1);
		
		List&lt;City&gt; cityList = createCityList();
		
		when(cityDao.queryCount(Mockito.anyMapOf(String.class, Object.class))).thenReturn(cityList.size());
		when(cityDao.queryCity(Mockito.anyMapOf(String.class, Object.class))).thenReturn(cityList);
		
		pagination = cityBoImpl.findInactiveCityByPage(pagination);
		
		verify(cityDao, times(1)).queryCount(Mockito.anyMapOf(String.class, Object.class));
		verify(cityDao, times(1)).queryCity(Mockito.anyMapOf(String.class, Object.class));
		
		Assert.assertEquals(pagination.getTotalCount(), cityList.size());
		Assert.assertTrue(pagination.hasNext());
	}
	
	private City createCity() {
		return createCity(&quot;any city name&quot;);
	}
	
	private City createCity(String cityName) {
		City city = new City();
		city.setName(cityName);
		return city;
	}
	
	private List&lt;City&gt; createCityList() {
		List&lt;City&gt; cityList = new ArrayList&lt;City&gt;();
		cityList.add(createCity(&quot;Shanghai&quot;));
		cityList.add(createCity(&quot;Beijing&quot;));
		cityList.add(createCity(&quot;Shenzhen&quot;));
		cityList.add(createCity(&quot;Guangzhou&quot;));
		cityList.add(createCity(&quot;Hangzhou&quot;));
		return cityList;
	}
	
	public void setPropertyByReflect(Object target, String name, Object value) throws Exception {
		Field field = target.getClass().getDeclaredField(name);
		field.setAccessible(true);
		field.set(target, value);
	}

} 
</pre><p><br></p><h1><span style="font-family:KaiTi_GB2312;font-size:18px;">一，测试方法的声明</span></h1><p><span style="font-family:KaiTi_GB2312;"><br></span></p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">在测试类中，并不是每一个方法都是用于测试的，你必须使用“标注”来明确表明哪些是测试方法。“标注”也是</span><span lang="EN-US" style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">JDK5</span><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">的一个新特性，用在此处非常恰当。我们可以看到，在某些方法的前有</span><span lang="EN-US" style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">@Before</span><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">、</span><span lang="EN-US" style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">@Test</span><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">、</span><span lang="EN-US" style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">@Ignore</span><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">等字样，这些就是标注，以一个“</span><span lang="EN-US" style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">@</span><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">”作为开头。这些标注都是</span><span lang="EN-US" style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">JUnit4</span><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">自定义的，熟练掌握这些标注的含义非常重要。</span></p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><br></span></p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">1，简单的测试类</span></p><p><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"></span></p><pre name="code" class="java">  @Test
	 public void testUpdate() {
		 DeliveryArea carryArea = carryAreaBo.findCarryAreaById(8);
		 if (carryArea != null) {
			 carryArea.setName(&quot;why&quot;);
			 carryArea.setCenterAddress(&quot;myaddress&quot;);
			 carryArea.setCenterLatitude(121.12345678901234);
			 carryArea.setCenterLongitude(234.09876543214321);
			 carryArea.setRadius(14.1234);
			 carryAreaBo.updateCarryArea(carryArea);
			 System.out.println(carryArea.getCenterLatitude());
			 System.out.println(carryArea.getCenterLongitude());
  			 System.out.println(carryArea.toString());
		}
 	}</pre><p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">2，忽略测试某些尚未完成的方法</span></p><p><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"></span></p><pre name="code" class="java">  @Ignore
	 @Test
	 public void testUpdate() {
		 DeliveryArea carryArea = carryAreaBo.findCarryAreaById(8);
		 if (carryArea != null) {
			 carryArea.setName(&quot;why&quot;);
			 carryArea.setCenterAddress(&quot;myaddress&quot;);
			 carryArea.setCenterLatitude(121.12345678901234);
			 carryArea.setCenterLongitude(234.09876543214321);
			 carryArea.setRadius(14.1234);
 			carryAreaBo.updateCarryArea(carryArea);
			 System.out.println(carryArea.getCenterLatitude());
			 System.out.println(carryArea.getCenterLongitude());
 			System.out.println(carryArea.toString());
		}
	 }</pre><br><p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">3，Fixture（固定代码段的执行）</span></p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span lang="EN-US" style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">Fixture</span><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">的含义就是“在某些阶段必然被调用的代码”。</span></span></p><p><br></p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">其一：</span></span></p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><br></span></span></p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">比如，如果我们只声明了一个</span><span lang="EN-US" style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">Calculator</span><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">对象，他的初始值是</span><span lang="EN-US" style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">0</span><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">，但是测试完加法操作后，他的值就不是</span><span lang="EN-US" style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">0</span><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">了；接下来测试减法操作，就必然要考虑上次加法操作的结果。这绝对是一个很糟糕的设计！我们非常希望每一个测试都是独立的，相互之间没有任何耦合度。因此，我们就很有必要在执行每一个测试之前，对</span><span lang="EN-US" style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">Calculator</span><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">对象进行一个“复原”操作，以消除其他测试造成的影响。因此，“在任何一个测试执行之前必须执行的代码”就是一个</span><span lang="EN-US" style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">Fixture</span><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">，我们用</span><span lang="EN-US" style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">@Before</span><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">来标注它，如前面例子所示：</span></span></p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><br></span></span></p><p><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"></span></span></p><pre name="code" class="java">      @Before
      public void setUp() throws Exception {
           calculator.clear();
      }</pre><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><br></span></p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">这里不在需要</span><span lang="EN-US" style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">@Test</span><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">标注，因为这不是一个</span><span lang="EN-US" style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">test</span><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">，而是一个</span><span lang="EN-US" style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">Fixture</span><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">。同理，如果“在任何测试执行之后需要进行的收尾工作”也是一个</span><span lang="EN-US" style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">Fixture</span><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">，使用</span><span lang="EN-US" style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">@After</span><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">来标注。由于本例比较简单，没有用到此功能。</span></p><p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><br></span></span></span></p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">其二：</span></span></span></p><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><br></span></span></span></p><p><span style="font-family:KaiTi_GB2312;"><span style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 35.8667px; text-transform: none; white-space: normal; word-spacing: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-size: 14pt;">有一个类是负责对大文件（超过</span><span style="font-size: 14pt;" lang="EN-US">500</span><span style="font-size: 14pt;">兆）进行读写，他的每一个方法都是对文件进行操作。换句话说，在调用每一个方法之前，我们都要打开一个大文件并读入文件内容，这绝对是一个非常耗费时间的操作。如果我们使用</span><span style="font-size: 14pt;" lang="EN-US">@Before</span><span style="font-size: 14pt;">和</span><span style="font-size: 14pt;" lang="EN-US">@After</span><span style="font-size: 14pt;">，那么每次测试都要读取一次文件，效率及其低下。这里我们所希望的是在所有测试一开始读一次文件，所有测试结束之后释放文件，而不是每次测试都读文件。</span><span style="font-size: 14pt;" lang="EN-US">JUnit</span><span style="font-size: 14pt;">的作者显然也考虑到了这个问题，它给出了</span><span style="font-size: 14pt;" lang="EN-US">@BeforeClass </span><span style="font-size: 14pt;">和</span><span style="font-size: 14pt;" lang="EN-US"> @AfterClass</span><span style="font-size: 14pt;">两个</span><span style="font-size: 14pt;" lang="EN-US">Fixture</span><span style="font-size: 14pt;">来帮我们实现这个功能。从名字上就可以看出，用这两个</span><span style="font-size: 14pt;" lang="EN-US">Fixture</span><span style="font-size: 14pt;">标注的函数，只在测试用例初始化时执行</span><span style="font-size: 14pt;" lang="EN-US">@BeforeClass</span><span style="font-size: 14pt;">方法，当所有测试执行完毕之后，执行</span><span style="font-size: 14pt;" lang="EN-US">@AfterClass</span><span style="font-size: 14pt;">进行收尾工作。在这里要注意一下，每个测试类只能有一个方法被标注为</span><span style="font-size: 14pt;" lang="EN-US">@BeforeClass </span><span style="font-size: 14pt;">或</span><span style="font-size: 14pt;" lang="EN-US"> @AfterClass</span><span style="font-size: 14pt;">，并且该方法必须是</span><span style="font-size: 14pt;" lang="EN-US">Public</span><span style="font-size: 14pt;">和</span><span style="font-size: 14pt;" lang="EN-US">Static</span><span style="font-size: 14pt;">的。</span></span></span></span></span></p><p><br></p><h1><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">二：使用Mockito</span></span></span></h1><p><span style="font-family:KaiTi_GB2312;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><br></span></span></span></p><p><span style="font-size:18px;"><span style="font-family:KaiTi_GB2312;"><span style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 35.8667px; text-transform: none; white-space: normal; word-spacing: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">介绍：</span></span></span></span></span></span></p><p><span style="font-size:18px;"><span style="font-family:KaiTi_GB2312;"><span style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 35.8667px; text-transform: none; white-space: normal; word-spacing: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><br></span></span></span></span></span></span></p><p><span style="font-size:18px;"><span style="font-family:KaiTi_GB2312;"><span style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 35.8667px; text-transform: none; white-space: normal; word-spacing: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">JUnit 是单元测试框架。Mockito 与 JUnit 不同，并不是单元测试框架（这方面 JUnit 已经足够好了），它是用于生成模拟对象或者直接点说，就是”假对象“的工具。两者定位不同，所以一般通常的做法就是联合 JUnit + Mockito 来进行测试。</span></span></span></span></span></span></p><p><span style="font-size:18px;"><span style="font-family:KaiTi_GB2312;"><span style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 35.8667px; text-transform: none; white-space: normal; word-spacing: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><br></span></span></span></span></span></span></p><p><span style="font-family:KaiTi_GB2312;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 35.8667px; text-transform: none; white-space: normal; word-spacing: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;">举例：</span></span></span></span></p><p><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"></span></span></span></p><pre name="code" class="java">List mock = mock( List.class );  
when( mock.get(0) ).thenReturn( 1 );  
assertEquals( &quot;预期返回1&quot;, 1, mock.get( 0 ) );// mock.get(0) 返回 1</pre><p><span style="font-family:KaiTi_GB2312;font-size:18px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><br></span></p><p><span style="font-family:KaiTi_GB2312;font-size:18px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">其 中 mock 是模拟 List 的对象，拥有 List 的所有方法和属性。when(xxxx).thenReturn(yyyy); 是指定当执行了这个方法的时候，返回 thenReturn 的值，相当于是对模拟对象的配置过程，为某些条件给定一个预期的返回值。可以理解为对于我们要测试的方法中，有需要调用mock的对象的对应方法，当调用到此方法时，对于返回值的设定。</span></p><p><p><span style="font-family:KaiTi_GB2312;"><br></span></p><p><span style="font-family:KaiTi_GB2312;font-size:18px;"><strong>Assert 说明</strong></span></p><p><span style="font-family:KaiTi_GB2312;"><br></span></p><p><span style="font-size:18px;"><span style="font-family:KaiTi_GB2312;"><span style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 35.8667px; text-transform: none; white-space: normal; word-spacing: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">junit中的assert方法全部放在Assert类中，下面简单介绍两个：</span></span></span></span></span></span></span></p><p><span style="font-size:18px;"><span style="font-family:KaiTi_GB2312;"><span style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 35.8667px; text-transform: none; white-space: normal; word-spacing: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><br></span></span></span></span></span></span></span></p><p><span style="font-size:18px;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 35.8667px; text-transform: none; white-space: normal; word-spacing: 0px; font-size: 14pt;"></span></span></p><p style="color: rgb(0, 0, 0); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px;"><span style="font-size:18px;">1.assertTrue/False([String message,]boolean condition);<br>&nbsp;&nbsp;&nbsp; 用来查看变量是是否为false或true，<span style="background-color: rgb(255, 255, 0);">如果assertFalse()查看的变量的值是false则测试成功，如果是true则失败，assertTrue()与之相反；</span> <br></span></p><p style="color: rgb(0, 0, 0); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px;"><span style="font-size:18px;">2.fail([String message,]);<br>&nbsp;&nbsp;&nbsp; 直接用来抛出错误。</span></p><p style="color: rgb(0, 0, 0); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px;"><span style="font-size:18px;">3.assertEquals([String message,]Object expected,Object actual);<br>&nbsp;&nbsp;&nbsp; 判断是否相等，可以指定输出错误信息。<br>&nbsp;&nbsp;&nbsp; 第一个参数是期望值，第二个参数是实际的值。<br>&nbsp;&nbsp;&nbsp; 这个方法对各个变量有多种实现</span></p><p style="color: rgb(0, 0, 0); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px;"><br></p><p style="color: rgb(0, 0, 0); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px;"><span style="font-size:18px;"><br></span></p><p><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><strong><span style="font-family:KaiTi_GB2312;font-size:18px;">验证Verify</span></strong><br><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><br></span></span></span></span></span></span></span></span></span></p><p style="color: rgb(0, 0, 0); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px;"><span style="font-family:KaiTi_GB2312;font-size:18px;">前面提到的 when(……).thenReturn(……) 属于状态测试，某些时候，测试不关心返回结果，而是侧重方法有否被正确的参数调用过，这时候就应该使用 验证方法了。从概念上讲，就是和状态测试所不同的“行为测试”了。</span></p><p style="color: rgb(0, 0, 0); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px;"><span style="font-family:KaiTi_GB2312;font-size:18px;">一旦使用 mock() 对模拟对象打桩，意味着 Mockito 会记录着这个模拟对象调用了什么方法，还有调用了多少次。最后由用户决定是否需要进行验证，即 verify() 方法。</span></p><p style="color: rgb(0, 0, 0); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px;"><span style="font-family:KaiTi_GB2312;font-size:18px;"><br></span></p><pre name="code" class="java">mockedList.add(&quot;one&quot;);  
mockedList.add(&quot;two&quot;);  
verify(mockedList).add(&quot;one&quot;); // 如果times不传入，则默认是1  </pre><span style="font-family:KaiTi_GB2312;font-size:18px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">verify 内部跟踪了所有的方法调用和参数的调用情况，然后会返回一个结果，说明是否通过。</span><p><span style="font-size:18px;"><span style="font-family:KaiTi_GB2312;font-size:18px;"><span style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 35.8667px; text-transform: none; white-space: normal; word-spacing: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">若调用成功，则程序正常运行，反之则会报告：Wanted but not invoked ：verify（mockedList）.add(&quot;one&quot;)<br></span></span></span></span></span></span></span></p><p><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><br></span></span></span></span></span></span></span></span></span></span></p><p><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"></span></span></span></span></span></span></span></span></span></p><pre name="code" class="java">Map mock = Mockito.mock( Map.class );  
when( mock.get( &quot;city&quot; ) ).thenReturn( &quot;广州&quot; );  
// 关注参数有否传入  
verify(mock).get( Matchers.eq( &quot;city&quot; ) );  
// 关注调用的次数  
verify(mock, times( 2 ));     </pre><p><span style="font-family:KaiTi_GB2312;font-size:18px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">也就是说，这是对历史记录作一种回溯校验的处理。</span></p><p><span style="font-family:KaiTi_GB2312;font-size:18px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><br></span></p><p><span style="font-family:KaiTi_GB2312;font-size:18px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">再来一个例子相信大家就明白了</span></p><p><span style="font-family:KaiTi_GB2312;font-size:18px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"></span></p><pre name="code" class="java">//首先要importMockito.

import static org.mockito.Mockito.*;

//mock creation

List mockedList = mock(List.class);

//using mock object

mockedList.add(&quot;one&quot;);

mockedList.clear();

//验证add方法是否在前面被调用了一次，且参数为“one”。clear方法同样。

verify(mockedList).add(&quot;one&quot;);

verify(mockedList).clear();

//下面的验证会失败。因为没有调用过add(&quot;two&quot;)。

verify(mockedList).add(&quot;two&quot;);

</pre><br><p><span style="font-family:KaiTi_GB2312;font-size:18px;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">原文中的一句话很重要：</span><span style="color:#ff00;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">Once created, mock will remember all interactions.</span><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">所以mockito知道前面是否调用过某方法。</span></span></p><p><span style="font-family:KaiTi_GB2312;font-size:18px;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><br></span></span></p><p><span style="font-family:KaiTi_GB2312;font-size:18px;"><span style="color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><br></span></span></p><p><span style="font-family:KaiTi_GB2312;font-size:18px;"><span style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;"><strong>模拟传入的参数 argument matchers</strong><br></span></span></p><p><p><br></p><p><span style="font-family:KaiTi_GB2312;font-size:18px;">举个例子来说吧：</span></p><p><pre name="code" class="java">when(request.getParameter(&quot;foo&quot;)).thenReturn(&quot;boo&quot;); </pre><br></p><p><span style="font-family:KaiTi_GB2312;font-size:18px;">这里 getParameter(&quot;foo&quot;) 这里我们是写死参数 foo 的，但是如果我不关心输入的具体内容，可以吗？可以的，最好能像正则表达式那样，/w+ 表示任意字符串是不是很方便，不用考虑具体什么参数，只要是 字符串 型的参数，就可以打桩。如此方便的想法 Mockito 也考虑到了，提供 argument matchers 机制，例如 anyString() 匹配任何 String 参数，anyInt() 匹配任何 int 参数，anySet() 匹配任何 Set，any() 则意味着参数为任意值。例子如下：</span><br></p><p><br></p><p><pre name="code" class="java">when(mockedList.get(anyInt())).thenReturn(&quot;element&quot;);     
System.out.println(mockedList.get(999));// 此时打印是 element </pre><br></p><p><span style="font-family:KaiTi_GB2312;font-size:18px;">再进一步，自定义类型也可以，如 any(User.class)</span><br></p><p><br></p><p><br></p><h1><span style="font-family:KaiTi_GB2312;font-size:18px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">总结：<br></span></h1><p><p><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:KaiTi_GB2312;font-size:18px;"><br></span></span></span></span></span></span></span></span></span></span></p><p><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:KaiTi_GB2312;font-size:18px;">以上只是对于单元测试的常用方法做了简单的说明，但是junit4还有很多强大的功能，例如：限时测试，测试异常，参数化测试，以及打包测试等，这些功能也同样很实用，还需要大家慢慢挖掘。</span></span></span></span></span></span></span></span></span></span></p><p><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:KaiTi_GB2312;font-size:18px;"><br></span></span></span></span></span></span></span></span></span></span></p><p><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 35.86666488647461px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:宋体;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: 14pt;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;color:#000000;font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; display: inline !important; float: none;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;"><span style="font-family:KaiTi_GB2312;font-size:18px;">附：<a target="_blank" target="_blank" href="http://blog.csdn.net/andycpp/article/details/1329218">JUnit4 学习</a></span></span></span></span></span></span></span></span></span></span></p><p><br></p><p><span style="font-size:18px;"><span style="font-family:KaiTi_GB2312;">针对开头的单元测试，附上CityDao的接口，以方便大家理解：</span></span></p><p><br></p><pre name="code" class="java">package com.lyancafe.core.dao;

import java.util.List;
import java.util.Map;

import org.apache.ibatis.annotations.Update;

import com.lyancafe.core.model.City;

public interface CityDao {
	public City findCity(int cityId);

	public City findCityByName(String cityName);

	public City findCityByCode(String code);

	public int createCity(City city);

	@Update(&quot;UPDATE t_city SET name = #{name}, manager_id = #{manager.id}, code = #{code}, sort_no = #{sortNo}, deduct_ahead_one = #{deductAheadOne}, deduct_delay_one = #{deductDelayOne}, updated = #{updated}, updated_by = #{updatedBy} WHERE id=#{id}&quot;)
	public int update(City city);

	@Update(&quot;UPDATE t_city SET active = 'N', updated = #{updated}, updated_by = #{updatedBy} WHERE id=#{id}&quot;)
	public int closeCity(City city);

	@Update(&quot;UPDATE t_city SET active = 'Y', updated = #{updated}, updated_by = #{updatedBy} WHERE id=#{id}&quot;)
	public int openCity(City city);

	public int queryCount(Map&lt;String, Object&gt; conditionMap);

	public List&lt;City&gt; queryCity(Map&lt;String, Object&gt; conditionMap);
}
</pre><br><br><p><p><br></p><p><br></p>   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/hejingyuan6/article/details/49851109'>原文链接</a>