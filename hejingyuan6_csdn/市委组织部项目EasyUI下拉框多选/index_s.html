<div class="articleLocationOnion"><a href='../../index.html'>首页: </a> &gt; <a href='../index_s.html'>未分类</a> &gt; 市委组织部项目EasyUI下拉框多选</div><div style="color:blue" align=center>市委组织部项目EasyUI下拉框多选</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">

<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">“市委组织部考核系统”，这个系统是用于组织部进行考核分数的录入和统计的系统，其中有考核指标和负责考核的单位需要选择出来，这就造成了一个问题，现在让我们分析分析这个过程：</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">&nbsp;</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">需求：</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">同一个指标可能由多个责任单位去考察，所以在设定指标时，添加责任单位就需要选择多个，虽然是多个责任单位，但是在数据库中却应该将这些责任单位分着放。</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">&nbsp;</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">想法：</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">在添加责任单位时，下拉框可以多选，然后将数据按“，”分割，向数据库中添加责任单位时，将下拉框中的内容查分，写入数据库。当显示时，将数据库中的几个责任单位字段合并显示到界面！</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">&nbsp;</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">问题：</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">如图：</span></p>
<p><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<p><img src="9331969714684" alt=""></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">也许大家还没看明白，我将责任单位下拉框中的内容复制出来，给大家看一下：</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">责任单位下拉框中应该显示：“市组织部，市统计局，市检察院”，但是他却显示为“市,组,织,部,,,市,统,计,局,,,市,检,察,院”也就是说，当我点击编辑时，它将我们要显示的内容每个字都按照“，”分割。</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">&nbsp;</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><span lang="zh-CN">查资料</span><span lang="en-US">:</span></span></p>
<span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span>
<p><span style="font-family:KaiTi_GB2312; font-size:24px"><img src="16293608177474" alt=""><br>
</span></p>
<p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><span lang="zh-CN"><br>
</span></span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><span lang="zh-CN">也就是当界面上显示的责任单位为汉字显示时，当点击编辑时，</span><span lang="en-US">easyui</span><span lang="zh-CN">会自动帮我们拆分。</span></span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">&nbsp;</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">解决：</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><span lang="zh-CN">当界面上责任单位显示的为</span><span lang="en-US">id</span><span lang="zh-CN">时，因为每个下拉框都绑定着</span><span lang="en-US">id</span><span lang="zh-CN">和</span><span lang="en-US">name</span><span lang="zh-CN">&#20540;，点击编辑时，</span><span lang="en-US">easyui</span><span lang="zh-CN">只能拆分</span><span lang="en-US">id</span><span lang="zh-CN">，但是每个</span><span lang="en-US">id</span><span lang="zh-CN">代表的是一个责任单位，在点击编辑时的责任单位处，固显示的为正常！</span><span lang="en-US">so</span><span lang="zh-CN">，方案：在查询时，我将责任单位拼接到一起时，将它的</span><span lang="en-US">id</span><span lang="zh-CN">也拼接一个字段，只是在查询时不显示而已，而当点击编辑时，我弹出的责任单位的框却是绑定的</span><span lang="en-US">id</span><span lang="zh-CN">&#20540;，这样就可以实现我们要的效果！</span></span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">&nbsp;</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">修改好的页面：</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><img src="1817897261503" alt=""><br>
</span></p>
<p style="margin:0in">
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">简单的代码实现：</span></p>
<pre code_snippet_id="173615" snippet_file_name="blog_20140128_1_8652086" name="code" class="html">&lt;span style=&quot;font-family:KaiTi_GB2312;font-size:24px;&quot;&gt;//显示时，显示拼接好的责任单位id和名字
&lt;table id=&quot;dg&quot; title=&quot;定量指标管理&quot; class=&quot;easyui-datagrid&quot; striped=&quot;true&quot; style=&quot;width:1055px;height:370px&quot;
            data-options=&quot;rownumbers:true,url:&#39;SetCityQuantifyTarget.ashx&#39;,pageSize:5,pageList:[5,10,15,20],method:&#39;get&#39;,toolbar:&#39;#toolbar&#39;&quot;
            pagination=&quot;true&quot; rownumbers=&quot;true&quot; fitColumns=&quot;true&quot; singleSelect=&quot;false&quot;&gt;
            &lt;thead&gt;
            &lt;tr&gt;
                &lt;th data-options=&quot;field:&#39;ck&#39;,checkbox:true&quot;&gt;&lt;/th&gt;
                &lt;th data-options=&quot;field:&#39;TargetID&#39;,width:150,align:&#39;center&#39;&quot; hidden=&quot;hidden&quot; &gt;指标ID&lt;/th&gt;
                &lt;th data-options=&quot;field:&#39;Name&#39;,width:150,align:&#39;center&#39;&quot;&gt;名称&lt;/th&gt;
                &lt;th data-options=&quot;field:&#39;Unit&#39;,width:150,align:&#39;center&#39;&quot;&gt;单位&lt;/th&gt;
                &lt;th data-options=&quot;field:&#39;ResponsibilityUnit&#39;,width:150,align:&#39;center&#39;&quot;&gt;责任单位&lt;/th&gt;           
                &lt;th data-options=&quot;field:&#39;ResponsibilityUnitID&#39;,width:150,align:&#39;center&#39;&quot; hidden =&quot;hidden&quot;&gt;责任单位ID&lt;/th&gt;           
                &lt;th data-options=&quot;field:&#39;Type1&#39;,width:80,align:&#39;center&#39;&quot;&gt;一类县市区权重&lt;/th&gt;
                &lt;th data-options=&quot;field:&#39;Type2&#39;,width:80,align:&#39;center&#39;&quot;&gt;二类县市区权重&lt;/th&gt;
                &lt;th data-options=&quot;field:&#39;Type3&#39;,width:80,align:&#39;center&#39;&quot;&gt;三类县市区权重&lt;/th&gt;
                &lt;th data-options=&quot;field:&#39;YearTime&#39;,width:80,align:&#39;center&#39;&quot;&gt;年份&lt;/th&gt;
                
            &lt;/tr&gt;
                 &lt;%--&lt;input type=&quot;hidden&quot; id=&quot;test&quot; name=&quot;test&quot;/&gt;--%&gt;
            &lt;/thead&gt;
        &lt;/table&gt;
&lt;/span&gt;</pre><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><span lang="zh-CN">点击编辑：显示的为拼接的</span><span lang="en-US">id</span><span lang="zh-CN">列</span></span></p>
<span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span>
<p style="margin:0in">
<pre code_snippet_id="173615" snippet_file_name="blog_20140128_2_9099027" name="code" class="html">&lt;span style=&quot;font-family:KaiTi_GB2312;font-size:24px;&quot;&gt;&lt;div class=&quot;fitem&quot;&gt;
                &lt;label&gt;责任单位:&lt;/label&gt;
                &lt;%--&lt;asp:DropDownList ID=&quot;ResponsibilityUnit&quot; runat=&quot;server&quot; class=&quot;easyui-validatebox&quot; required=&quot;true&quot; Width=&quot;131px&quot; &gt;&lt;/asp:DropDownList&gt;--%&gt;
                &lt;input class=&quot;easyui-combobox&quot; id=&quot;ResponsibilityUnitID&quot; runat=&quot;server&quot; Width=&quot;133px&quot;  style=&quot;border-color:black&quot;
                            name=&quot;ResponsibilityUnit&quot;
                            data-options=&quot;
                                url: &#39;SetCityQuantifyTarget.ashx?test=GetCity&#39;, 
                                method:&#39;get&#39;,
                                valueField:&#39;cityid&#39;,
                                textField:&#39;departmentname&#39;,
                                multiple:true,
                                editable:false,
                                panelHeight:&#39;auto&#39;
                        &quot; /&gt;
                &lt;%--&lt;input type=&quot;hidden&quot;,id=&quot;ResponsibilityUnitID&quot;/&gt;--%&gt; 
            &lt;/div&gt;
&lt;/span&gt;</pre><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span>
<p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><span lang="zh-CN">保存时：向数据库中写时为</span><span lang="en-US">id</span></span></p>
<span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span>
<p style="margin:0in">
<pre code_snippet_id="173615" snippet_file_name="blog_20140128_3_9829375" name="code" class="javascript">&lt;span style=&quot;font-family:KaiTi_GB2312;font-size:24px;&quot;&gt;//更新保存用户
      function saveUser() {
          var test = document.getElementById(&quot;test&quot;).value;
          //获取界面输入的值
          var TargetID = document.getElementById(&quot;TargetID&quot;).value;
          var Name = document.getElementById(&quot;Name&quot;).value;
          var Unit = document.getElementById(&quot;unit&quot;).value;
          var Type3 = document.getElementById(&quot;Type3&quot;).value;
          var Type2 = document.getElementById(&quot;Type2&quot;).value;
          var Type1 = document.getElementById(&quot;Type1&quot;).value;
          var ResponsibilityUnit = $(&#39;#ResponsibilityUnitID&#39;).combobox(&#39;getValues&#39;);//document.getElementById(&quot;ResponsibilityUnit&quot;).value;
         
          var typeID;
          typeID = $(&#39;#Type&#39;).combobox(&#39;getValue&#39;);

          $(&#39;#fm&#39;).form(&#39;submit&#39;, {
              //url: &quot;DevolomentInfo.ashx?CadresID=&quot; + CadresID + &quot;&amp;CadresName=&quot; + CadresName + &quot;&amp;Unit=&quot; + Unit + &quot;&amp;Position=&quot; + Position + &quot;&amp;test=&quot; + modify,
              url: &quot;SetCityQuantifyTarget.ashx?typeID=&quot; + typeID + &quot;&amp;TargetID=&quot; + TargetID + &quot;&amp;Name=&quot; + Name + &quot;&amp;Unit=&quot; + Unit + &quot;&amp;Type3=&quot; + Type3 + &quot;&amp;Type2=&quot; + Type2 + &quot;&amp;Type1=&quot; + Type1 + &quot;&amp;ResponsibilityUnit=&quot; + ResponsibilityUnit + &quot;&amp;test=&quot; + test,
              onSubmit: function () {
                  return $(this).form(&#39;validate&#39;);
              },
              
              success: function (result) {
                  alert(result);
                  if (result.indexOf(&quot;T&quot;) == 0) {

                      alert(&#39;恭喜您，信息添加成功！&#39;)
                      $(&#39;#dlg&#39;).dialog(&#39;close&#39;);		// 关闭窗口
                      $(&#39;#dg&#39;).datagrid(&#39;reload&#39;);
                  } else if (result.indexOf(&quot;E&quot;) == 0)
                      {
                      alert(&#39;保存失败，请您核对！此指标已存在！&#39;)
                  }
                  else {
                      alert(&#39;保存失败，请您核对！(责任单位最多只能选择3个)&#39;)
                  }
                  var result = eval(&#39;(&#39; + result + &#39;)&#39;);
                  if (result.success) {
                      $(&#39;#dlg&#39;).dialog(&#39;close&#39;);		// close the dialog
                      $(&#39;#dg&#39;).datagrid(&#39;reload&#39;);
                      $.message.alert(&#39;提示&#39;, &#39;保存成功！&#39;, &#39;info&#39;);

                      
                  } else {
                      
                  }
              }
          });
      }
&lt;/span&gt;</pre><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span>
<p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px">总结：</span></p>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><span lang="en-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang="zh-CN">在这里只是提供一种思路，我想说：一个问题的解决方式有多种，在平时我们就要锻炼自己多方位思考问题，注重拓宽自己的思路与&#30524;界，遇到问题要同时有n种方案，这样才能保证工作的正常进行！</span></span></p>
<span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span>
<p style="margin:0in"><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span>
<p><br>
</p>
   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/hejingyuan6/article/details/18812435'>原文链接</a>