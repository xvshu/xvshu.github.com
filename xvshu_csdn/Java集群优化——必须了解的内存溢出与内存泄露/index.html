<div style="color:blue" align=center>Java集群优化——必须了解的内存溢出与内存泄露</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">

<p>概念：</p>
<p>内存溢出 out of memory</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 是指程序在申请内存时，没有足够的内存空间供其使用，出现out of memory；比如申请了一个integer,但给它存了long才能存下的数，那就是内存溢出。</p>
<p>内存泄露 memory leak</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 是指程序在申请内存后，无法释放已申请的内存空间，一次内存泄露危害可以忽略，但内存泄露堆积后果很严重，无论多少内存,迟早会被占光。</p>
<p>联系：</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;memory leak会最终会导致out of memory，<span style="font-size:12px">内存溢出就是你要求分配的内存超出了系统能给你的，系统不能满足需求，于是产生溢出。&nbsp;</span></p>
<p><span style="font-size:12px">大家看看这幅图理解下：</span></p>
<p><span style="font-size:12px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="30217836065298" alt=""><br>
</span></p>
<p><span style="font-size:12px"><br>
</span></p>
<p><span style="font-size:12px"><br>
</span></p>
<p><span style="font-size:12px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<img src="23386666173445" alt=""><br>
</span></p>
<p>详解：</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 内存泄漏是指你向系统申请分配内存进行使用(new)，可是使用完了以后却不归还(delete)，结果你申请到的那块内存你自己也不能再访问（也许你把它的地址给弄丢了），而系统也不能再次将它分配给需要的程序。一个盘子用尽各种方法只能装4个果子，你装了5个，结果掉倒地上不能吃了。这就是溢出！比方说栈，栈满时再做进栈必定产生空间溢出，叫上溢，栈空时再做退栈也产生空间溢出，称为下溢。就是分配的内存不足以放下数据项序列,称为内存溢出.&nbsp;</p>
<p>分类：</p>
<p>以发生的方式来分类，内存泄漏可以分为4类：&nbsp;</p>
&nbsp; &nbsp; &nbsp; &nbsp; 1. 常发性内存泄漏。发生内存泄漏的代码会被多次执行到，每次被执行的时候都会导致一块内存泄漏。&nbsp;<br>
&nbsp; &nbsp; &nbsp; &nbsp; 2. 偶发性内存泄漏。发生内存泄漏的代码只有在某些特定环境或操作过程下才会发生。常发性和偶发性是相对的。对于特定的环境，偶发性的也许就变成了常发性的。所以测试环境和测试方法对检测内存泄漏至关重要。&nbsp;<br>
&nbsp; &nbsp; &nbsp; &nbsp; 3. 一次性内存泄漏。发生内存泄漏的代码只会被执行一次，或者由于算法上的缺陷，导致总会有一块仅且一块内存发生泄漏。比如，在类的构造函数中分配内存，在析构函数中却没有释放该内存，所以内存泄漏只会发生一次。&nbsp;<br>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 4. 隐式内存泄漏。程序在运行过程中不停的分配内存，但是直到结束的时候才释放内存。严&#26684;的说这里并没有发生内存泄漏，因为最终程序释放了所有申请的内存。但是对于一个服务器程序，需要运行几天，几周甚至几个月，不及时释放内存也可能导致最终耗尽系统的所有内存。所以，我们称这类内存泄漏为隐式内存泄漏。&nbsp;</p>
<p><br>
</p>
危害：<br>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 从用户使用程序的角度来看，内存泄漏本身不会产生什么危害，作为一般的用户，根本感觉不到内存泄漏的存在。真正有危害的是内存泄漏的堆积，这会最终消耗尽系统所有的内存。从这个角度来说，一次性内存泄漏并没有什么危害，因为它不会堆积，而隐式内存泄漏危害性则非常大，因为较之于常发性和偶发性内存泄漏它更难被检测到&nbsp;</p>
<p><br>
</p>
<p>总结：</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 我们操作某些变量，ide环境给我们提供了非常好的便利性，jvm为我们封装了优秀的自动垃圾回收机制，但是，我们还是那句话，人是不可靠的，这句话使我们反复认识自己，同样，内存的问题，我们也要深入研究，因为这是大型软件优化不可避免的地方！</p>
   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/xvshu/article/details/47666961'>原文链接</a>