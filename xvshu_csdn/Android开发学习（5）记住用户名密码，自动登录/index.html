<div style="color:blue" align=center>Android开发学习（5）记住用户名密码，自动登录</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">
        <div class="markdown_views"><p>上篇文章我们学习编写了一个简单的登录页面，本篇文章，我们继续丰富这个页面，实现自动登录和记住用户名密码，学习安卓一个简单的数据存储器SharedPreferences使用。</p>



<h1 id="sharedpreferences">SharedPreferences</h1>

<p>SharedPreferences是Android中最容易理解的数据存储技术，实际上SharedPreferences处理的就是一个基于XML文件存储key-value（键值对）。SharedPreferences常用来存储一些轻量级的数据. 其存储位置在/data/data/&lt;包名&gt;/shared_prefs目录下。SharedPreferences对象本身只能获取数据而不支持存储和修改，存储修改是通过Editor对象实现。</p>



<h2 id="初始化">初始化</h2>



<pre class="prettyprint"><code class=" hljs avrasm">spUser = this<span class="hljs-preprocessor">.getSharedPreferences</span>(spName, Context<span class="hljs-preprocessor">.MODE</span>_PRIVATE)<span class="hljs-comment">;</span></code></pre>



<h2 id="获取键值对">获取键值对</h2>



<pre class="prettyprint"><code class=" hljs avrasm">spUser<span class="hljs-preprocessor">.getString</span>(spKeyUser, <span class="hljs-string">""</span>)</code></pre>

<h2 id="设置键值对">设置键值对</h2>



<pre class="prettyprint"><code class=" hljs avrasm">SharedPreferences<span class="hljs-preprocessor">.Editor</span> editor = spUser<span class="hljs-preprocessor">.edit</span>()<span class="hljs-comment">;</span>
editor<span class="hljs-preprocessor">.putString</span>(spKeyUser, userid)<span class="hljs-comment">;</span>
editor<span class="hljs-preprocessor">.putString</span>(spKeyPass,pass)<span class="hljs-comment">;</span>
editor<span class="hljs-preprocessor">.commit</span>()<span class="hljs-comment">;</span></code></pre>



<h1 id="登录页面">登录页面</h1>

<p>增加记住用户名密码，自动登录多选框 <br>
<img src="22211146145272" alt="login-auto" title=""></p>

<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">RelativeLayout</span>          <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>
                         <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
                         <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                         <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"#2197db"</span>
&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">TextView
</span>            <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"XS-TestApp"</span>
            <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/loginbutton"</span>
            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_centerHorizontal</span>=<span class="hljs-value">"true"</span>
            <span class="hljs-attribute">android:layout_marginTop</span>=<span class="hljs-value">"90dp"</span>
            <span class="hljs-attribute">android:layout_marginBottom</span>=<span class="hljs-value">"20dp"</span>
            <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"#fffefe"</span>
            <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"30sp"</span>/&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>            <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/input"</span>
            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_below</span>=<span class="hljs-value">"@+id/loginbutton"</span>
            <span class="hljs-attribute">android:layout_marginLeft</span>=<span class="hljs-value">"28dp"</span>
            <span class="hljs-attribute">android:layout_marginRight</span>=<span class="hljs-value">"28dp"</span>
            <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"#fff"</span>
            <span class="hljs-attribute">android:orientation</span>=<span class="hljs-value">"vertical"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"fill_parent"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"44dp"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"#fff"</span>
                <span class="hljs-attribute">android:gravity</span>=<span class="hljs-value">"center_vertical"</span>
                <span class="hljs-attribute">android:orientation</span>=<span class="hljs-value">"horizontal"</span> &gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">EditText
</span>                    <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/userId"</span>
                    <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
                    <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"fill_parent"</span>
                    <span class="hljs-attribute">android:layout_weight</span>=<span class="hljs-value">"1"</span>
                    <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@null"</span>
                    <span class="hljs-attribute">android:imeOptions</span>=<span class="hljs-value">"actionDone"</span>
                    <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"16sp"</span>
                    <span class="hljs-attribute">android:ems</span>=<span class="hljs-value">"10"</span>
                    <span class="hljs-attribute">android:hint</span>=<span class="hljs-value">"请输入用户名"</span>
            &gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">EditText</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                    <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/button_bar"</span>
                    <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"20dp"</span>
                    <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"20dp"</span>
                    <span class="hljs-attribute">android:layout_marginRight</span>=<span class="hljs-value">"8dp"</span>
                    <span class="hljs-attribute">android:layout_marginLeft</span>=<span class="hljs-value">"1dp"</span>
                    <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@drawable/login_input_arrow"</span>
            /&gt;</span>

        <span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"fill_parent"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"1.0px"</span>
                <span class="hljs-attribute">android:layout_marginLeft</span>=<span class="hljs-value">"1.0px"</span>
                <span class="hljs-attribute">android:layout_marginRight</span>=<span class="hljs-value">"1.0px"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"#ffc0c3c4"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">EditText
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/pass"</span>
                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"fill_parent"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"44.0dip"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"#00ffffff"</span>
                <span class="hljs-attribute">android:gravity</span>=<span class="hljs-value">"center_vertical"</span>
                <span class="hljs-attribute">android:inputType</span>=<span class="hljs-value">"textPassword"</span>
                <span class="hljs-attribute">android:maxLength</span>=<span class="hljs-value">"16"</span>
                <span class="hljs-attribute">android:maxLines</span>=<span class="hljs-value">"1"</span>
                <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"#ff1d1d1d"</span>
                <span class="hljs-attribute">android:textColorHint</span>=<span class="hljs-value">"#ff666666"</span>
                <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"16.0sp"</span>
                <span class="hljs-attribute">android:hint</span>=<span class="hljs-value">"请输入密码"</span>
        /&gt;</span>




    <span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">CheckBox
</span>            <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/cb_rememberpass"</span>
            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_below</span>=<span class="hljs-value">"@id/input"</span>
            <span class="hljs-attribute">android:layout_marginLeft</span>=<span class="hljs-value">"28dp"</span>
            <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"记住密码"</span>
            <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"#fdfbfb"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">CheckBox
</span>            <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/cb_autologin"</span>
            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_below</span>=<span class="hljs-value">"@id/cb_rememberpass"</span>
            <span class="hljs-attribute">android:layout_marginLeft</span>=<span class="hljs-value">"28dp"</span>
            <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"自动登录"</span>
            <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"#fcfbfb"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>            <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/loginBtn"</span>
            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"fill_parent"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_below</span>=<span class="hljs-value">"@+id/cb_autologin"</span>
            <span class="hljs-attribute">android:layout_marginTop</span>=<span class="hljs-value">"10dp"</span>
            <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"#3aadfd"</span>
            <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"登  录"</span>
            <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"#ffffff"</span>
            <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"18dp"</span>
            <span class="hljs-attribute">android:layout_centerHorizontal</span>=<span class="hljs-value">"true"</span>
            <span class="hljs-attribute">android:layout_marginLeft</span>=<span class="hljs-value">"28dp"</span>
            <span class="hljs-attribute">android:layout_marginRight</span>=<span class="hljs-value">"28dp"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">TextView
</span>            <span class="hljs-attribute">android:text</span>=<span class="hljs-value">""</span>
            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_below</span>=<span class="hljs-value">"@+id/loginBtn"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:layout_centerHorizontal</span>=<span class="hljs-value">"true"</span>
            <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/promptText"</span>
            <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"#ff0000"</span>
            <span class="hljs-attribute">android:layout_marginTop</span>=<span class="hljs-value">"10dp"</span>
            <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"18sp"</span>/&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">RelativeLayout</span>&gt;</span></code></pre>

<h1 id="activity-改造">Activity 改造</h1>



<pre class="prettyprint"><code class=" hljs avrasm">package <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.markmoney</span><span class="hljs-preprocessor">.xvshu</span><span class="hljs-preprocessor">.markmoney</span><span class="hljs-preprocessor">.Activitys</span><span class="hljs-comment">;</span>

import android<span class="hljs-preprocessor">.app</span><span class="hljs-preprocessor">.Activity</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.content</span><span class="hljs-preprocessor">.Context</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.content</span><span class="hljs-preprocessor">.Intent</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.content</span><span class="hljs-preprocessor">.SharedPreferences</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.os</span><span class="hljs-preprocessor">.Bundle</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.Base</span>64<span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.Log</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.View</span><span class="hljs-comment">;</span>
import android<span class="hljs-preprocessor">.widget</span>.*<span class="hljs-comment">;</span>
import <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.markmoney</span><span class="hljs-preprocessor">.xvshu</span><span class="hljs-preprocessor">.markmoney</span><span class="hljs-preprocessor">.HelloActivity</span><span class="hljs-comment">;</span>
import <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.markmoney</span><span class="hljs-preprocessor">.xvshu</span><span class="hljs-preprocessor">.markmoney</span><span class="hljs-preprocessor">.R</span><span class="hljs-comment">;</span>
import <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.markmoney</span><span class="hljs-preprocessor">.xvshu</span><span class="hljs-preprocessor">.markmoney</span><span class="hljs-preprocessor">.utils</span><span class="hljs-preprocessor">.DesUtils</span><span class="hljs-comment">;</span>
import <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.squareup</span><span class="hljs-preprocessor">.okhttp</span><span class="hljs-preprocessor">.Call</span><span class="hljs-comment">;</span>
import <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.squareup</span><span class="hljs-preprocessor">.okhttp</span><span class="hljs-preprocessor">.Callback</span><span class="hljs-comment">;</span>

import <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.squareup</span><span class="hljs-preprocessor">.okhttp</span><span class="hljs-preprocessor">.OkHttpClient</span><span class="hljs-comment">;</span>
import <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.squareup</span><span class="hljs-preprocessor">.okhttp</span><span class="hljs-preprocessor">.Response</span><span class="hljs-comment">;</span>
import <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.zhy</span><span class="hljs-preprocessor">.http</span><span class="hljs-preprocessor">.okhttp</span><span class="hljs-preprocessor">.OkHttpUtils</span><span class="hljs-comment">;</span>
import org<span class="hljs-preprocessor">.json</span><span class="hljs-preprocessor">.JSONObject</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.concurrent</span><span class="hljs-preprocessor">.TimeUnit</span><span class="hljs-comment">;</span>

<span class="hljs-comment">/**
 * Created by xvshu on 2017/8/7.
 */</span>
public class LoginActivity extends Activity implements View<span class="hljs-preprocessor">.OnClickListener</span> {
    private static final String TAG = <span class="hljs-string">"login"</span><span class="hljs-comment">;</span>
    Button loginBtn = null<span class="hljs-comment">;</span>
    EditText useridEt = null<span class="hljs-comment">;</span>
    EditText passEt = null<span class="hljs-comment">;</span>
    TextView promptText = null<span class="hljs-comment">;</span>
    CheckBox cbRememberPass=null<span class="hljs-comment">;</span>
    CheckBox cbAutoLogin=null<span class="hljs-comment">;</span>
    private SharedPreferences spUser=null<span class="hljs-comment">;</span>

    private String spKeyUser=<span class="hljs-string">"UserName"</span><span class="hljs-comment">;</span>
    private String spKeyPass=<span class="hljs-string">"PassWord"</span><span class="hljs-comment">;</span>
    private String spKeyRememberPass=<span class="hljs-string">"REMEMBERPASS"</span><span class="hljs-comment">;</span>
    private String spKeyAutoLogin=<span class="hljs-string">"AUTOLOGIN"</span><span class="hljs-comment">;</span>
    private String spName=<span class="hljs-string">"userInfo"</span><span class="hljs-comment">;</span>
    private String userName=<span class="hljs-string">"admin"</span><span class="hljs-comment">;</span>
    private String passWord=<span class="hljs-string">"admin"</span><span class="hljs-comment">;</span>

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super<span class="hljs-preprocessor">.onCreate</span>(savedInstanceState)<span class="hljs-comment">;</span>
        setContentView(R<span class="hljs-preprocessor">.layout</span><span class="hljs-preprocessor">.login</span>)<span class="hljs-comment">;</span>
        loginBtn = (Button) findViewById(R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.loginBtn</span>)<span class="hljs-comment">;</span>
        loginBtn<span class="hljs-preprocessor">.setOnClickListener</span>(this)<span class="hljs-comment">;</span>
        useridEt = (EditText) findViewById(R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.userId</span>)<span class="hljs-comment">;</span>
        passEt = (EditText) findViewById(R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.pass</span>)<span class="hljs-comment">;</span>
        promptText = (TextView) findViewById(R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.promptText</span>)<span class="hljs-comment">;</span>
        cbRememberPass=(CheckBox)findViewById(R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.cb</span>_rememberpass)<span class="hljs-comment">;</span>
        cbAutoLogin=(CheckBox)findViewById(R<span class="hljs-preprocessor">.id</span><span class="hljs-preprocessor">.cb</span>_autologin)<span class="hljs-comment">;</span>
        spUser = this<span class="hljs-preprocessor">.getSharedPreferences</span>(spName, Context<span class="hljs-preprocessor">.MODE</span>_PRIVATE)<span class="hljs-comment">;</span>

        //判断记住密码多选框的状态
        if(spUser<span class="hljs-preprocessor">.getBoolean</span>(spKeyRememberPass, false))
        {
            //设置默认是记录密码状态
            cbRememberPass<span class="hljs-preprocessor">.setChecked</span>(true)<span class="hljs-comment">;</span>
            useridEt<span class="hljs-preprocessor">.setText</span>(spUser<span class="hljs-preprocessor">.getString</span>(spKeyUser, <span class="hljs-string">""</span>))<span class="hljs-comment">;</span>
            passEt<span class="hljs-preprocessor">.setText</span>(spUser<span class="hljs-preprocessor">.getString</span>(spKeyPass, <span class="hljs-string">""</span>))<span class="hljs-comment">;</span>
            //判断自动登陆多选框状态
            if(spUser<span class="hljs-preprocessor">.getBoolean</span>(spKeyAutoLogin, false))
            {
                //设置默认是自动登录状态
                cbAutoLogin<span class="hljs-preprocessor">.setChecked</span>(true)<span class="hljs-comment">;</span>
                //跳转界面
                Intent intent_hello = new Intent(this, HelloActivity<span class="hljs-preprocessor">.class</span>)<span class="hljs-comment">;</span>
                startActivity(intent_hello)<span class="hljs-comment">;</span>

            }
        }

        //监听记住密码多选框按钮事件
        cbRememberPass<span class="hljs-preprocessor">.setOnCheckedChangeListener</span>(new CompoundButton<span class="hljs-preprocessor">.OnCheckedChangeListener</span>() {
            public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
                if (cbRememberPass<span class="hljs-preprocessor">.isChecked</span>()) {
                    spUser<span class="hljs-preprocessor">.edit</span>()<span class="hljs-preprocessor">.putBoolean</span>(spKeyRememberPass, true)<span class="hljs-preprocessor">.commit</span>()<span class="hljs-comment">;</span>
                }else {
                    spUser<span class="hljs-preprocessor">.edit</span>()<span class="hljs-preprocessor">.putBoolean</span>(spKeyRememberPass, false)<span class="hljs-preprocessor">.commit</span>()<span class="hljs-comment">;</span>
                }

            }
        })<span class="hljs-comment">;</span>

        //监听自动登录多选框事件
        cbAutoLogin<span class="hljs-preprocessor">.setOnCheckedChangeListener</span>(new CompoundButton<span class="hljs-preprocessor">.OnCheckedChangeListener</span>() {
            public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
                if (cbAutoLogin<span class="hljs-preprocessor">.isChecked</span>()) {
                    spUser<span class="hljs-preprocessor">.edit</span>()<span class="hljs-preprocessor">.putBoolean</span>(spKeyAutoLogin, true)<span class="hljs-preprocessor">.commit</span>()<span class="hljs-comment">;</span>
                } else {
                    spUser<span class="hljs-preprocessor">.edit</span>()<span class="hljs-preprocessor">.putBoolean</span>(spKeyAutoLogin, false)<span class="hljs-preprocessor">.commit</span>()<span class="hljs-comment">;</span>
                }
            }
        })<span class="hljs-comment">;</span>

    }


    @Override
    public void onClick(View v) {
        String userid = useridEt<span class="hljs-preprocessor">.getText</span>()<span class="hljs-preprocessor">.toString</span>()<span class="hljs-preprocessor">.trim</span>()<span class="hljs-comment">;</span>
        String pass = passEt<span class="hljs-preprocessor">.getText</span>()<span class="hljs-preprocessor">.toString</span>()<span class="hljs-preprocessor">.trim</span>()<span class="hljs-comment">;</span>
        if(userid<span class="hljs-preprocessor">.equals</span>(<span class="hljs-string">""</span>)){
            promptText<span class="hljs-preprocessor">.setText</span>(R<span class="hljs-preprocessor">.string</span><span class="hljs-preprocessor">.userIdError</span>)<span class="hljs-comment">;</span>
            return <span class="hljs-comment">;</span>
        }
        if(pass<span class="hljs-preprocessor">.equals</span>(<span class="hljs-string">""</span>)){
            promptText<span class="hljs-preprocessor">.setText</span>(R<span class="hljs-preprocessor">.string</span><span class="hljs-preprocessor">.passError</span>)<span class="hljs-comment">;</span>
            return <span class="hljs-comment">;</span>
        }

        if (userid<span class="hljs-preprocessor">.equals</span>(userName) &amp;&amp; pass<span class="hljs-preprocessor">.equals</span>(passWord)) {
            Toast<span class="hljs-preprocessor">.makeText</span>(this, R<span class="hljs-preprocessor">.string</span><span class="hljs-preprocessor">.loginSuccess</span>, Toast<span class="hljs-preprocessor">.LENGTH</span>_LONG)<span class="hljs-preprocessor">.show</span>()<span class="hljs-comment">;</span>

            if(cbRememberPass<span class="hljs-preprocessor">.isChecked</span>()) {
                //记住用户名、密码、
                SharedPreferences<span class="hljs-preprocessor">.Editor</span> editor = spUser<span class="hljs-preprocessor">.edit</span>()<span class="hljs-comment">;</span>
                editor<span class="hljs-preprocessor">.putString</span>(spKeyUser, userid)<span class="hljs-comment">;</span>
                editor<span class="hljs-preprocessor">.putString</span>(spKeyPass,pass)<span class="hljs-comment">;</span>
                editor<span class="hljs-preprocessor">.commit</span>()<span class="hljs-comment">;</span>
            }else{
                //不记住用户名、密码
                SharedPreferences<span class="hljs-preprocessor">.Editor</span> editor = spUser<span class="hljs-preprocessor">.edit</span>()<span class="hljs-comment">;</span>
                editor<span class="hljs-preprocessor">.putString</span>(spKeyUser, <span class="hljs-string">""</span>)<span class="hljs-comment">;</span>
                editor<span class="hljs-preprocessor">.putString</span>(spKeyPass,<span class="hljs-string">""</span>)<span class="hljs-comment">;</span>
                editor<span class="hljs-preprocessor">.commit</span>()<span class="hljs-comment">;</span>
            }

            Intent intent_hello = new Intent(this, HelloActivity<span class="hljs-preprocessor">.class</span>)<span class="hljs-comment">;</span>
            startActivity(intent_hello)<span class="hljs-comment">;</span>
            LoginActivity<span class="hljs-preprocessor">.this</span><span class="hljs-preprocessor">.finish</span>()<span class="hljs-comment">;</span>
        } else {
            Toast<span class="hljs-preprocessor">.makeText</span>(this, R<span class="hljs-preprocessor">.string</span><span class="hljs-preprocessor">.loginError</span>, Toast<span class="hljs-preprocessor">.LENGTH</span>_LONG)<span class="hljs-preprocessor">.show</span>()<span class="hljs-comment">;</span>
        }

    }
}
</code></pre>

<h1 id="总结">总结</h1>

<p>SharedPreferences是一种安全性欠佳的存储方案，如果考虑用户信息的安全性，一般选择在服务端进行加密，解密与验证，这样保证了用户信息破解的难度。</p></div>
        <script>
            $(function () {
                $('pre.prettyprint code').each(function () {
                    var lines = $(this).text().split('\n').length;
                    var $numbering = $('<ul/>').addClass('pre-numbering').hide();
                    $(this).addClass('has-numbering').parent().append($numbering);
                    for (i = 1; i <= lines; i++) {
                        $numbering.append($('<li/>').text(i));
                    };
                    $numbering.fadeIn(1700);
                });
            });
        </script>
   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/xvshu/article/details/76853402'>原文链接</a>