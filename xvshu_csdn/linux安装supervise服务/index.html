<div style="color:blue" align=center>linux安装supervise服务</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">
<p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; 今天给大家介绍一款linux上非常实用的小工具，supervise，这款工具可以监控某服务运行状态，检测到某服务死掉后会自动执行某命令重启服务，现在我们一起学习一下</span></p><p><span style="font-size:18px;"><br></span></p><h1><span style="font-size:18px;">1，扩展yum源</span></h1><p><span style="font-size:18px;"><span style="white-space:pre">	</span>在某路径下执行以下命令</span></p><p><span style="font-size:18px;"><br></span></p><p><h2><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; 1.1,安装atomic源</span></h2><span style="font-size:18px;">&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # wget http://www.atomicorp.com/installers/atomic &nbsp;#下载<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # sh ./atomic &nbsp; #安装<br>&nbsp;<br></span><h2><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; 1.2,设置<span style="font-size:18px;">atomic.repo</span></span></h2></p><p><span style="font-size:18px;"><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 设置</span>/etc/yum.repos.d/中的atomic.repo中的priority=11<br></span></p><p><span style="font-size:18px;"><br></span></p><h1><span style="font-size:18px;">2，安装daemontools</span></h1><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; 使用yum安装daemontools</span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; 执行：&nbsp;yum install daemontools</span></p><p><span style="font-size:18px;"><br></span></p><h1><span style="font-size:18px;">3，配置run文件</span></h1><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; 在某路径新建 run文件</span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; 输入如下你的服务启动的命令，以启动kafka为例</span></p><p><pre code_snippet_id="1738032" snippet_file_name="blog_20160630_1_549034" name="code" class="html"><span style="font-size:18px;">#!/bin/bash
cd /Data/servers/kafka
bin/kafka-server-start.sh config/server.properties</span></pre><span style="font-size:18px;"><br><br></span></p><h1><span style="font-size:18px;">4，启动服务</span></h1><p><pre code_snippet_id="1738032" snippet_file_name="blog_20160630_2_929935" name="code" class="html"><span style="font-size:18px;">supervise /Data/servers/kafka/supervise</span></pre><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; 以如上命令启动，程序就被纳入监控中了.<br>&nbsp; &nbsp; &nbsp; &nbsp; 结果如下;</span></p><p><span style="font-size:18px;"><img src="456432210465240" alt=""><br></span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;要监控的程序都有一个守护进程看守，以后要彻底杀死进程，别忘了先杀死守护进程！</span></p><p><span style="font-size:18px;"><br></span></p><h1><span style="font-size:18px;">总结</span></h1><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; 在本次例子中，比较耗时的是对yum源的扩展，找不到合适的源包含这个工具，经过反复尝试，找到了这个源，以后大家直接安装就可以了，方便大家！</span></p><p><br></p>   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/xvshu/article/details/51792668'>原文链接</a>