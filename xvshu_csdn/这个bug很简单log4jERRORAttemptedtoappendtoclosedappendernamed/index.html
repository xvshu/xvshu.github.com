<div style="color:blue" align=center>这个bug很简单log4jERRORAttemptedtoappendtoclosedappendernamed</div><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">
<p><span style="font-size:18px;">最近调试log4j的时候，一直遇到这个错误：</span></p><h1><span style="font-size:18px;">bug：</span></h1><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; log4j:ERROR Attempted to append to closed appender named<br></span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;一直未找到原因，看了几篇博客后知道，是有配置重合了，大家看：</span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;这是以前的配置文件：</span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="31146947664459" alt=""><br></span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;这样就会导致，log4j会清楚所有的appender，删除后，问题就排出了，这个bug督促我们，要努力看源码啊！</span></p><h1><span style="font-size:18px;">错误原因：</span></h1><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;大家先看log4j的类图</span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="51931768378999.png" alt=""><br></span></p><p><span style="font-size:18px;"><br></span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;不难发现，错误应该出现在appender上，我们顺着源码找一找：</span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="15510959585358.png" alt=""><br></span></p><p><span style="font-size:18px;"><br></span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="34574259838506" alt=""><br></span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="505172010412463" alt=""><br></span></p><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; 现在觉得，应该是在处理ROOT节点的时候，将重复的输出都去除了，具体原因还要深入log4j的源码，欢迎大家共同交流。<br></span></p><h1><span style="font-size:18px;">总结：</span></h1><p><span style="font-size:18px;">&nbsp; &nbsp; &nbsp; &nbsp; 在找bug的路上越走越远，甚至到了源码的地步，对于每一个走在源码的小伙伴们说一声，你们的博客太及时了！时序图太给力了！一切为了人民着想的分享，是无私的，分享的越多，得到的越多！</span></p>   
</div><div class="ArcitleLink"><a href='http://blog.csdn.net/xvshu/article/details/51028644'>原文链接</a>